"use strict";(self.webpackChunkforntend=self.webpackChunkforntend||[]).push([[6444],{6444:(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});var a=s(2791),r=s(2202),c=s(2903),n=s(3050),l=s(2602),i=s(184);const d=()=>{const[e,t]=(0,a.useState)([]),[s,d]=(0,a.useState)([]),[o,x]=(0,a.useState)([]),[m,h]=(0,a.useState)(!1),[g,p]=(0,a.useState)(new Date),[u,f]=(0,a.useState)(!1),b=(0,a.useRef)(null),[j]=(0,l.lr)(),y=j.get("eventName"),N=localStorage.getItem("access_token");(0,a.useEffect)((()=>{const e=localStorage.getItem("coop_matches");e&&t(JSON.parse(e))}),[]),(0,a.useEffect)((()=>(b.current=new WebSocket(`wss://rpair.org/ws/competition_event/${y}/coop/`),b.current.onopen=()=>{console.log("WebSocket connection established")},b.current.onmessage=e=>{const s=JSON.parse(e.data);console.log("Score Update:",s),s.game_id&&void 0!==s.score&&(t((e=>{let t=[...e];const a=t.findIndex((e=>e.code===s.game_id));return-1===a?t.push({code:s.game_id,team1:s.team1_name||"Team 1",team2:s.team2_name||"Team 2",score:s.score}):t[a]={...t[a],score:s.score},localStorage.setItem("coop_matches",JSON.stringify(t)),t})),p(new Date))},b.current.onerror=e=>{console.error("WebSocket error:",e)},b.current.onclose=()=>{console.log("WebSocket connection closed")},()=>{b.current&&b.current.close()})),[y]);const w=e=>{switch(e){case 1:return(0,i.jsx)(r.PIe,{className:"text-yellow-500 text-2xl"});case 2:return(0,i.jsx)(r.PIe,{className:"text-gray-400 text-2xl"});case 3:return(0,i.jsx)(r.PIe,{className:"text-amber-600 text-2xl"});default:return(0,i.jsx)("span",{className:"text-gray-500 font-medium",children:e})}};return(0,i.jsxs)("div",{className:"p-4 max-w-7xl mx-auto",children:[(0,i.jsx)(n.ql,{children:(0,i.jsx)("title",{children:"Live-Team"})}),(0,i.jsxs)("div",{className:"text-center mb-8",children:[(0,i.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-gray-800 mb-2 bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-teal-500",children:"Coop Challenge"}),(0,i.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-600",children:[(0,i.jsx)(r.dnK,{className:"animate-spin"}),(0,i.jsxs)("span",{children:["Last updated: ",g.toLocaleTimeString()]})]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-xl shadow-md overflow-hidden mb-8 border border-gray-100",children:[(0,i.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-teal-500 p-4",children:(0,i.jsx)("h2",{className:"text-xl font-bold text-white text-center",children:"Recent Matches"})}),(0,i.jsx)("div",{className:"hidden md:block overflow-x-auto",children:(0,i.jsxs)("table",{className:"w-full",children:[(0,i.jsx)("thead",{className:"bg-gray-50",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Match"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Team 1"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Team 2"}),(0,i.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Score"})]})}),(0,i.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map((e=>{var t;return(0,i.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,i.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap font-medium text-gray-900",children:["#",e.code]}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.team1}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.team2}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center font-bold bg-blue-50 text-blue-700 rounded-lg mx-2",children:null!==(t=e.score)&&void 0!==t?t:0})]},e.code)}))})]})}),(0,i.jsx)("div",{className:"block md:hidden",children:(0,i.jsx)("div",{className:"grid grid-cols-1 gap-4 p-4",children:e.map((e=>{var t;return(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[(0,i.jsxs)("div",{className:"text-center text-sm font-medium text-gray-500 mb-3",children:["Match ",e.code]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("div",{className:"text-center flex-1",children:(0,i.jsx)("div",{className:"font-medium text-gray-700",children:e.team1})}),(0,i.jsxs)("div",{className:"mx-2 text-center",children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:null!==(t=e.score)&&void 0!==t?t:0}),(0,i.jsx)("div",{className:"text-xs text-gray-400",children:"COOP Score"})]}),(0,i.jsx)("div",{className:"text-center flex-1",children:(0,i.jsx)("div",{className:"font-medium text-gray-700",children:e.team2})})]})]},e.code)}))})})]}),(0,i.jsx)("div",{className:"flex justify-center mb-6",children:(0,i.jsxs)("button",{onClick:async()=>{if(f(!0),!y)return console.error("No event name found"),void f(!1);try{const e=await c.Z.get(`https://rpair.org/api/event/${y}/teamwork-rank`,{headers:{Authorization:`Bearer ${N}`}});x(e.data),h(!0)}catch(e){console.error("Error fetching rankings:",e)}finally{f(!1)}},disabled:u,className:`inline-flex items-center px-6 py-3 rounded-full font-medium text-white shadow-lg ${u?"bg-gray-400":"bg-gradient-to-r from-yellow-500 to-amber-600 hover:from-yellow-600 hover:to-amber-700"} transition-all transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2`,children:[u?(0,i.jsx)(r.dnK,{className:"animate-spin mr-2"}):(0,i.jsx)(r.yyP,{className:"mr-2"}),u?"Loading...":"View COOP Rankings"]})}),m&&(0,i.jsxs)("div",{className:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-100",children:[(0,i.jsx)("div",{className:"bg-gradient-to-r from-amber-500 to-yellow-500 p-4",children:(0,i.jsxs)("h2",{className:"text-xl font-bold text-white text-center flex items-center justify-center gap-2",children:[(0,i.jsx)(r.yyP,{}),"COOP Challenge Rankings"]})}),(0,i.jsx)("div",{className:"overflow-x-auto",children:(0,i.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,i.jsx)("thead",{className:"bg-gray-50",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rank"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Team"}),(0,i.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Average Score"})]})}),(0,i.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(((e,t)=>(0,i.jsxs)("tr",{className:(0===t?"bg-amber-50":1===t?"bg-gray-50":2===t?"bg-amber-25":"hover:bg-gray-50")+" transition-colors",children:[(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,i.jsx)("div",{className:"flex items-center gap-3",children:w(t+1)})}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap font-medium text-gray-900",children:e.team__name}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center font-bold",children:(0,i.jsx)("span",{className:"inline-block px-3 py-1 rounded-full bg-blue-100 text-blue-700",children:e.avg_score})})]},e.team)))})]})})]})]})}}}]);
//# sourceMappingURL=6444.67bdc30d.chunk.js.map