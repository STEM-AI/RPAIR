"use strict";(self.webpackChunkforntend=self.webpackChunkforntend||[]).push([[3038],{3038:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var n=a(2791),s=a(1830),r=a.n(s),o=a(2903),i=a(8402),l=a(3553),c=a(2602),d=a(2187),u=a(7251),m=a(3974),p=a(5125),h=(a(1052),a(184));function x(){const[e,t]=(0,n.useState)([]),[a,s]=(0,n.useState)(!0),[x,g]=(0,n.useState)(null),[y,v]=(0,n.useState)(null),[f,j]=(0,n.useState)(""),[b,N]=(0,n.useState)(!1),[w,S]=(0,n.useState)(!1),[_,C]=(0,n.useState)(null),[Z,k]=(0,n.useState)([]),[A,P]=(0,n.useState)({competition_event:"",user:""}),[E,B]=(0,n.useState)(""),T=(0,c.s0)(),z=localStorage.getItem("access_token"),W=async()=>{var e,a;if(!z)return g("Authentication Error"),v("You are not authorized. Please log in."),j("error"),void s(!1);try{s(!0),g(null),v(null);const e=await o.Z.get("https://rpair.org/api/admin/judges/",{headers:{Authorization:`Bearer ${z}`},timeout:1e4});t(e.data),s(!1)}catch(r){if(s(!1),g(r.message),"ECONNABORTED"===r.code)v("Request timed out. Please check your connection and try again.");else if(o.Z.isAxiosError(r)){var n;switch(null===(n=r.response)||void 0===n?void 0:n.status){case 401:v("Your session has expired. Please log in again.");break;case 403:v("You don't have permission to access these events.");break;case 404:v("The events resource was not found. Please try again later.");break;case 500:v("Server error. Please try again later.");break;default:v((null===(e=r.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to fetch events. Please try again.")}}else v("An unexpected error occurred. Please try again.");j("error")}},$=async e=>{if(!z)return g("Authentication Error"),v("You are not authorized. Please log in."),void j("error");try{const t=`https://rpair.org/api/admin/judge/${encodeURIComponent(e)}/delete/`;await o.Z.delete(t,{headers:{Authorization:`Bearer ${z}`},timeout:1e4}),v("Judge deleted successfully"),j("success"),W()}catch(t){v("Failed to delete the judge"),j("error")}};return(0,n.useEffect)((()=>{W()}),[z]),(0,n.useEffect)((()=>{E&&(async()=>{if(!z||!E)return;const e=`https://rpair.org/api/competition/${E}/event/`;try{const t=await o.Z.get(e,{headers:{Authorization:`Bearer ${z}`}});k(t.data)}catch(t){g("Failed to fetch events. Please try again.")}})()}),[E,z]),(0,h.jsxs)("div",{className:"container max-w-7xl mx-auto px-4 py-8",children:[(0,h.jsxs)("h2",{className:"mb-12 text-center",children:[(0,h.jsx)("span",{className:"text-5xl font-bold bg-gradient-to-r from-cyan-600 to-cyan-400 bg-clip-text text-transparent",children:"All Judges"}),(0,h.jsx)("div",{className:"mt-2 h-1 bg-gradient-to-r from-cyan-500 to-cyan-300 w-24 mx-auto rounded-full"})]}),(0,h.jsxs)("div",{className:"mb-8 flex flex-col sm:flex-row gap-4 items-center justify-between",children:[(0,h.jsx)("div",{className:"w-full sm:max-w-xs",children:(0,h.jsx)("input",{type:"text",placeholder:"Search judges...",className:"w-full px-4 py-2 rounded-full border border-gray-200 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all"})}),(0,h.jsxs)("div",{className:"flex gap-4",children:[(0,h.jsx)("button",{className:"w-full sm:w-auto px-6 py-2 bg-gradient-to-r from-cyan-600 to-cyan-400 text-white rounded-full hover:from-cyan-700 hover:to-cyan-500 transition-all shadow-sm hover:shadow-md",onClick:()=>T("/Dashboard/Admin/CreateStaff"),children:"Add New Judge +"}),(0,h.jsx)("button",{className:"w-full sm:w-auto px-6 py-2 bg-gradient-to-r from-emerald-600 to-emerald-400 text-white rounded-full hover:from-emerald-700 hover:to-emerald-500 transition-all shadow-sm hover:shadow-md",onClick:()=>{const t=new p.default;t.setFillColor("#06b6d4"),t.rect(0,0,t.internal.pageSize.width,40,"F"),t.setFontSize(22),t.setFont("helvetica","bold"),t.setTextColor(255),t.text("Judges Report",15,25);const a=e.flatMap((e=>{const t=e.judging_events||[];return 0===t.length?[{judge:e.username,event:"No assigned events",dates:"-",location:"-"}]:t.map(((t,a)=>({judge:0===a?e.username:"",event:t.competition_event.name,dates:`${t.competition_event.start_date} - ${t.competition_event.end_date}`,location:t.competition_event.location})))}));t.autoTable({startY:45,head:[["Judge","Event","Dates","Location"]],body:a.map((e=>[e.judge,e.event,e.dates,e.location])),styles:{fontSize:12,cellPadding:4,valign:"top",fillColor:"#ecfeff",textColor:40,lineColor:200,lineWidth:.3},headStyles:{fillColor:"#0e7490",textColor:255,fontSize:14,fontStyle:"bold",valign:"middle"},bodyStyles:{minCellHeight:15},columnStyles:{0:{cellWidth:35,fontStyle:"bold",halign:"left"},1:{cellWidth:60},2:{cellWidth:50},3:{cellWidth:40}},didParseCell:e=>{0===e.column.index&&""===e.cell.raw&&(e.cell.styles.fillColor=255,e.cell.styles.lineColor=200)}}),t.save(`judges-report-${(new Date).toISOString().slice(0,10)}.pdf`)},children:"Download PDF"})]})]}),a?(0,h.jsxs)("div",{className:"text-center py-12",children:[(0,h.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-cyan-500 border-t-transparent mx-auto"}),(0,h.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading judges..."})]}):x?(0,h.jsxs)(i.Z,{severity:"error",className:"mb-4 rounded-lg",children:[(0,h.jsx)(l.Z,{children:"Error"}),y]}):(0,h.jsxs)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[(0,h.jsx)("div",{className:"block md:hidden space-y-4 p-4",children:e.map((e=>{var t;return(0,h.jsxs)(u.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-sm border border-gray-100 p-4",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,h.jsx)("h3",{className:"text-lg font-semibold text-cyan-800",children:e.username}),(0,h.jsxs)("div",{className:"flex gap-2",children:[(0,h.jsx)("button",{onClick:()=>{C(e.username),N(!0)},className:"p-1.5 text-cyan-600 hover:bg-cyan-50 rounded-lg",children:(0,h.jsx)(m.O9D,{size:20})}),(0,h.jsx)("button",{onClick:()=>$(e.username),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-lg",children:(0,h.jsx)(m.Ybf,{size:20})})]})]}),(null===(t=e.judging_events)||void 0===t?void 0:t.length)>0?(0,h.jsx)("div",{className:"space-y-3",children:e.judging_events.map((e=>(0,h.jsx)("div",{className:"bg-gray-50 p-3 rounded-lg",children:(0,h.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,h.jsx)("div",{className:"font-medium text-gray-500",children:"Event:"}),(0,h.jsx)("div",{className:"text-cyan-700",children:e.competition_event.name}),(0,h.jsx)("div",{className:"font-medium text-gray-500",children:"Dates:"}),(0,h.jsxs)("div",{className:"text-gray-600",children:[e.competition_event.start_date," - ",e.competition_event.end_date]}),(0,h.jsx)("div",{className:"font-medium text-gray-500",children:"Location:"}),(0,h.jsx)("div",{className:"text-gray-600",children:e.competition_event.location})]})},e.id)))}):(0,h.jsx)("div",{className:"text-center py-3 text-gray-400 bg-gray-50 rounded-lg",children:"No assigned events"})]},e.username)}))}),(0,h.jsx)("div",{className:"hidden md:block",children:(0,h.jsxs)("table",{className:"w-full",children:[(0,h.jsx)("thead",{className:"bg-gradient-to-r from-cyan-50 to-cyan-100",children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-cyan-700",children:"Judge"}),(0,h.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-cyan-700",children:"Event"}),(0,h.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-cyan-700",children:"Dates"}),(0,h.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-cyan-700",children:"Location"}),(0,h.jsx)("th",{className:"px-6 py-4 text-center text-sm font-semibold text-cyan-700",children:"Actions"})]})}),(0,h.jsx)("tbody",{className:"divide-y divide-gray-100",children:e.map((e=>{var t,a,n;return(0,h.jsxs)(u.E.tr,{initial:{opacity:0},animate:{opacity:1},className:"hover:bg-gray-50 transition-colors",children:[(0,h.jsx)("td",{className:"px-6 py-4 font-medium text-cyan-900",children:e.username}),(0,h.jsx)("td",{className:"px-6 py-4",children:(null===(t=e.judging_events)||void 0===t?void 0:t.length)>0?e.judging_events.map((e=>(0,h.jsx)("div",{className:"text-sm text-gray-700",children:e.competition_event.name},e.id))):(0,h.jsx)("span",{className:"text-gray-400",children:"No events"})}),(0,h.jsx)("td",{className:"px-6 py-4",children:null===(a=e.judging_events)||void 0===a?void 0:a.map((e=>(0,h.jsxs)("div",{className:"text-sm text-gray-600",children:[e.competition_event.start_date," - ",e.competition_event.end_date]},e.id)))}),(0,h.jsx)("td",{className:"px-6 py-4",children:null===(n=e.judging_events)||void 0===n?void 0:n.map((e=>(0,h.jsx)("div",{className:"text-sm text-gray-600",children:e.competition_event.location},e.id)))}),(0,h.jsx)("td",{className:"px-6 py-4 text-center",children:(0,h.jsxs)("div",{className:"flex justify-center space-x-3",children:[(0,h.jsx)("button",{onClick:()=>{C(e.username),N(!0)},className:"text-cyan-600 hover:text-cyan-800 p-2 rounded-full hover:bg-cyan-50 transition-colors",children:(0,h.jsx)(m.O9D,{size:20})}),(0,h.jsx)("button",{onClick:()=>$(e.username),className:"text-red-600 hover:text-red-800 p-2 rounded-full hover:bg-red-50 transition-colors",children:(0,h.jsx)(m.Ybf,{size:20})})]})})]},e.username)}))})]})}),0===e.length&&!a&&(0,h.jsxs)("div",{className:"text-center py-16",children:[(0,h.jsx)("div",{className:"text-gray-400 mb-4",children:(0,h.jsx)(m.pBC,{size:48,className:"mx-auto"})}),(0,h.jsx)("h3",{className:"text-xl font-medium text-gray-500 mb-2",children:"No judges found"}),(0,h.jsx)("p",{className:"text-gray-400",children:"Start by adding your first judge"})]})]}),b&&(0,h.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,h.jsx)(u.E.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-2xl shadow-xl w-full max-w-md",children:(0,h.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),S(!0),v(null),j("");const t={user:_,competition_event:A.competition_event};try{await o.Z.post(`https://rpair.org/api/admin/${t.competition_event}/judge-event/`,t,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${z}`}}),j("success"),v("Event assigned successfully!"),r().fire({icon:"success",title:"Success",text:"Event assigned successfully!",showConfirmButton:!1,timer:1500}),P({competition_event:"",user:""}),N(!1),W()}catch(s){var a,n;j("error"),v((null===(a=s.response)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.detail)||"Failed to assign the event. Please try again.")}finally{S(!1)}},className:"p-6",children:[(0,h.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,h.jsx)("h3",{className:"text-xl font-semibold text-cyan-800",children:"Assign Event"}),(0,h.jsx)("button",{onClick:()=>N(!1),className:"text-gray-400 hover:text-gray-600 p-1 rounded-full hover:bg-gray-100",children:(0,h.jsx)(d.bjh,{size:24})})]}),(0,h.jsxs)("div",{className:"space-y-4",children:[(0,h.jsxs)("div",{className:"mb-4",children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Enter Competition Name"}),(0,h.jsxs)("select",{type:"text",value:E,onChange:e=>{B(e.target.value)},placeholder:"e.g., vex_iq",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-cyan-500 focus:border-cyan-500",children:[(0,h.jsx)("option",{value:"",children:"Select an Competition"}),(0,h.jsx)("option",{value:"vex_iq",children:"Vex IQ"}),(0,h.jsx)("option",{value:"vex_go",children:"Vex GO"}),(0,h.jsx)("option",{value:"vex_123",children:"Vex 123"})]})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Event"}),(0,h.jsxs)("select",{name:"competition_event",value:A.competition_event,onChange:e=>{P({...A,[e.target.name]:e.target.value})},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-cyan-500 focus:border-cyan-500",required:!0,children:[(0,h.jsx)("option",{value:"",children:"Select an event"}),Z.map((e=>(0,h.jsx)("option",{value:e.name,children:e.name},e.id)))]})]})]}),(0,h.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[(0,h.jsx)("button",{type:"button",onClick:()=>N(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md",children:"Cancel"}),(0,h.jsx)("button",{type:"submit",disabled:w,className:"px-4 py-2 text-sm font-medium text-white bg-cyan-600 hover:bg-cyan-700 rounded-md disabled:opacity-50",children:w?"Adding...":"Add Event"})]})]})})})]})}},3553:(e,t,a)=>{a.d(t,{Z:()=>w});var n=a(2791),s=a(3733),r=a(4419),o=a(6934),i=a(5141),l=a(8357),c=a(2839),d=a(4036),u=a(2036),m=a(5878),p=a(1217);function h(e){return(0,p.ZP)("MuiTypography",e)}(0,m.Z)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);var x=a(184);const g={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},y=(0,c.u7)(),v=(0,o.ZP)("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.variant&&t[a.variant],"inherit"!==a.align&&t[`align${(0,d.Z)(a.align)}`],a.noWrap&&t.noWrap,a.gutterBottom&&t.gutterBottom,a.paragraph&&t.paragraph]}})((0,i.Z)((e=>{let{theme:t}=e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(t.typography).filter((e=>{let[t,a]=e;return"inherit"!==t&&a&&"object"===typeof a})).map((e=>{let[t,a]=e;return{props:{variant:t},style:a}})),...Object.entries(t.palette).filter((0,u.Z)()).map((e=>{let[a]=e;return{props:{color:a},style:{color:(t.vars||t).palette[a].main}}})),...Object.entries(t.palette?.text||{}).filter((e=>{let[,t]=e;return"string"===typeof t})).map((e=>{let[a]=e;return{props:{color:`text${(0,d.Z)(a)}`},style:{color:(t.vars||t).palette.text[a]}}})),{props:e=>{let{ownerState:t}=e;return"inherit"!==t.align},style:{textAlign:"var(--Typography-textAlign)"}},{props:e=>{let{ownerState:t}=e;return t.noWrap},style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:e=>{let{ownerState:t}=e;return t.gutterBottom},style:{marginBottom:"0.35em"}},{props:e=>{let{ownerState:t}=e;return t.paragraph},style:{marginBottom:16}}]}}))),f={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},j=n.forwardRef((function(e,t){const{color:a,...n}=(0,l.i)({props:e,name:"MuiTypography"}),o=y({...n,...!g[a]&&{color:a}}),{align:i="inherit",className:c,component:u,gutterBottom:m=!1,noWrap:p=!1,paragraph:j=!1,variant:b="body1",variantMapping:N=f,...w}=o,S={...o,align:i,color:a,className:c,component:u,gutterBottom:m,noWrap:p,paragraph:j,variant:b,variantMapping:N},_=u||(j?"p":N[b]||f[b])||"span",C=(e=>{const{align:t,gutterBottom:a,noWrap:n,paragraph:s,variant:o,classes:i}=e,l={root:["root",o,"inherit"!==e.align&&`align${(0,d.Z)(t)}`,a&&"gutterBottom",n&&"noWrap",s&&"paragraph"]};return(0,r.Z)(l,h,i)})(S);return(0,x.jsx)(v,{as:_,ref:t,className:(0,s.Z)(C.root,c),...w,ownerState:S,style:{..."inherit"!==i&&{"--Typography-textAlign":i},...w.style}})}));function b(e){return(0,p.ZP)("MuiAlertTitle",e)}(0,m.Z)("MuiAlertTitle",["root"]);const N=(0,o.ZP)(j,{name:"MuiAlertTitle",slot:"Root",overridesResolver:(e,t)=>t.root})((0,i.Z)((e=>{let{theme:t}=e;return{fontWeight:t.typography.fontWeightMedium,marginTop:-2}}))),w=n.forwardRef((function(e,t){const a=(0,l.i)({props:e,name:"MuiAlertTitle"}),{className:n,...o}=a,i=a,c=(e=>{const{classes:t}=e;return(0,r.Z)({root:["root"]},b,t)})(i);return(0,x.jsx)(N,{gutterBottom:!0,component:"div",ownerState:i,ref:t,className:(0,s.Z)(c.root,n),...o})}))},2839:(e,t,a)=>{a.d(t,{zY:()=>m,u7:()=>p});a(2791);var n=a(8519),s=a(2554),r=a(184);function o(e){const{styles:t,defaultTheme:a={}}=e,n="function"===typeof t?e=>{return t(void 0===(n=e)||null===n||0===Object.keys(n).length?a:e);var n}:t;return(0,r.jsx)(s.xB,{styles:n})}var i=a(449);const l=function(e){let{styles:t,themeId:a,defaultTheme:n={}}=e;const s=(0,i.Z)(n),l="function"===typeof t?t(a&&s[a]||s):t;return(0,r.jsx)(o,{styles:l})};var c=a(6482),d=a(988);const u=function(e){return(0,r.jsx)(l,{...e,defaultTheme:c.Z,themeId:d.Z})};function m(e){return function(t){return(0,r.jsx)(u,{styles:"function"===typeof e?a=>e({theme:a,...t}):e})}}function p(){return n.Z}},8519:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(7093),s=a(3044);const r=e=>{const t={systemProps:{},otherProps:{}},a=e?.theme?.unstable_sxConfig??s.Z;return Object.keys(e).forEach((n=>{a[n]?t.systemProps[n]=e[n]:t.otherProps[n]=e[n]})),t};function o(e){const{sx:t,...a}=e,{systemProps:s,otherProps:o}=r(a);let i;return i=Array.isArray(t)?[s,...t]:"function"===typeof t?function(){const e=t(...arguments);return(0,n.P)(e)?{...s,...e}:s}:{...s,...t},{...o,sx:i}}}}]);
//# sourceMappingURL=3038.e738cbde.chunk.js.map