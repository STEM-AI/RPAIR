{"version":3,"file":"static/js/9834.afb9f78c.chunk.js","mappings":"sLAoGA,MA0FA,EA1FgBA,KACd,MAAOC,EAAUC,IAAeC,EAAAA,EAAAA,UAAS,CACvCC,QAAS,MAEJC,EAASC,IAAcH,EAAAA,EAAAA,WAAS,IAChCI,EAAOC,IAAYL,EAAAA,EAAAA,UAAS,MAE7BM,EAAQC,aAAaC,QAAQ,gBAgDnC,OACEC,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iCAAgCC,SAAA,EAC5CC,EAAAA,EAAAA,KAACC,EAAAA,GAAM,CAAAF,UACAC,EAAAA,EAAAA,KAAA,SAAAD,SAAO,gBAGfF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,sDAAqDC,SAAA,EAClEC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,kJAAiJC,SAAC,aAI/JP,IAASQ,EAAAA,EAAAA,KAAA,OAAKF,UAAU,4BAA2BC,SAAEP,KAEtDK,EAAAA,EAAAA,MAAA,QAAMK,SAzDSC,UAGnB,GAFAC,EAAEC,iBAEGnB,EAASG,QAKd,IACE,MAAMiB,QAAiBC,MAAM,oCAAgD,CAC3EC,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAUhB,KAE3BiB,KAAMC,KAAKC,UAAU3B,KAGvB,IAAKoB,EAASQ,GAAI,CAChB,MAAMC,QAAkBT,EAASU,OACjC,MAAM,IAAIC,MAAMF,EAAUG,SAAW,8BACvC,CAEA,MAAMC,QAAeb,EAASU,OAC9BI,QAAQC,IAAI,6BAA8BF,GAC1CG,IAAAA,KAAU,CACMC,KAAM,UACNC,MAAO,UACPC,KAAM,2BACNC,mBAAmB,IAGnCvC,EAAY,IAAKD,EAAUG,QAAS,KACpCI,EAAS,KACX,CAAE,MAAOD,GACPC,EAASD,EAAM0B,SAAW,uBAC1BE,QAAQ5B,MAAM,uBAAwBA,EACxC,MAjCEC,EAAS,uBAiCX,EAoBiCM,SAAA,EAC3BC,EAAAA,EAAAA,KAAA,YACE2B,GAAG,YACHC,YAAY,6BACZ9B,UAAU,wIACV+B,KAAM,EACNC,MAAO5C,EAASG,QAChB0C,SAxBmB3B,IAC3BjB,EAAY,IAAKD,EAAUG,QAASe,EAAE4B,OAAOF,OAAQ,KA0B/C9B,EAAAA,EAAAA,KAAA,UACEiC,KAAK,SACLnC,UAAU,8HAA6HC,SACxI,wBAKD,C","sources":["pages/Dashboards/AddNews.jsx"],"sourcesContent":["// import { useState, useEffect } from \"react\";\r\n// import { jwtDecode } from 'jwt-decode';\r\n// import { FcGoogle } from \"react-icons/fc\";\r\n\r\n// import { Link } from \"react-router-dom\";\r\n// import axios from \"axios\";\r\n// import { useNavigate } from \"react-router-dom\";\r\n// import { VscEye, VscEyeClosed } from \"react-icons/vsc\";\r\n\r\n\r\n// const AddNews = () => {\r\n//     const [username, setUsername] = useState('');\r\n//     const [password, setPassword] = useState('');\r\n//     const [loading, setLoading] = useState(false);\r\n//     const [error, setError] = useState(null);\r\n//     const [passwordVisible, setPasswordVisible] = useState(false);\r\n//     const navigate = useNavigate();\r\n\r\n\r\n//  const handlePasswordVisibility = () => {\r\n//             setPasswordVisible(prevState => !prevState);\r\n//           };\r\n//     const signIn = async (e) => {\r\n//         e.preventDefault();\r\n//         setLoading(true);\r\n//         setError(null);\r\n\r\n//         if (!username || !password) {\r\n//             setError(\"Username and password are required.\");\r\n//             setLoading(false);\r\n//             return;\r\n//         }\r\n\r\n//         try {\r\n//             console.log(\"REACT_APP_API_URL_AUTH\" , process.env.REACT_APP_API_URL_AUTH);\r\n//             const { data } = await axios.post(\r\n//                 `${process.env.REACT_APP_API_URL_AUTH}/login/`,\r\n//                 { username, password },\r\n//                 {\r\n//                     headers: { \"Content-Type\": \"application/json\" },\r\n//                     withCredentials: true\r\n//                 }\r\n//             );\r\n\r\n       \r\n\r\n//             const decodedToken = jwtDecode(data.access_token);\r\n//             localStorage.setItem(\"user_role\", JSON.stringify({\r\n//                 is_superuser: decodedToken?.is_superuser || false,\r\n//                 is_staff: decodedToken?.is_staff || false,\r\n//             }));\r\n\r\n//             navigate(\"/\", { replace: true });\r\n\r\n//         } catch (err) {\r\n//             setError(err.response?.data?.detail || \"Login failed. Check your credentials.\");\r\n//         } finally {\r\n//             setLoading(false);\r\n//         }\r\n//     };\r\n\r\n\r\n\r\n//     return (\r\n//         <div\r\n//          >\r\n//             <div id=\"loginForm\" className=\"relative  flex bg-white rounded-2xl mb-10 shadow-lg overflow-hidden mx-auto max-w-sm lg:max-w-4xl\">\r\n                \r\n//                 <div className=\"w-full p-8 lg:w-1/2 flex flex-col mx-auto\">\r\n                   \r\n//                     <form className=\"mt-6\" onSubmit={signIn}>\r\n//                         {error && <div className=\"mt-4 text-sm text-red-600\">{error}</div>}\r\n//                         <div>\r\n//                             <textarea id=\"newsInput\" rows=\"5\" cols=\"50\" className=\"p-10\" placeholder=\"Enter news content here...\"></textarea>\r\n//                         </div>\r\n                       \r\n                        \r\n//                         <button\r\n//                             type=\"submit\"\r\n//                             className={`mt-8 font-bold py-2 px-4 w-full rounded ${\r\n//                                 loading\r\n//                                     ? \"bg-gray-400 cursor-not-allowed\"\r\n//                                     : \"bg-cyan-800 hover:bg-cyan-600\"\r\n//                             } transition-all duration-700 cursor-pointer text-white`}\r\n//                             disabled={loading}\r\n//                         >\r\n//                             {loading ? \"Adding...\" : \"Add News\"}\r\n//                         </button>\r\n//                     </form>\r\n//                 </div>\r\n//             </div>\r\n//         </div>\r\n//     );\r\n// };\r\n\r\n// export default AddNews;\r\nimport React, { useState, useEffect } from \"react\";\r\nimport Swal from \"sweetalert2\";\r\nimport { Helmet } from \"react-helmet-async\";\r\n\r\nconst AddNews = () => {\r\n  const [newsData, setNewsData] = useState({\r\n    content: \"\"\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  const token = localStorage.getItem(\"access_token\");\r\n\r\n \r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!newsData.content) {\r\n      setError(\"Content is required.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(`${process.env.REACT_APP_API_URL}/admin/news/`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        body: JSON.stringify(newsData)\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.message || \"Network response was not ok\");\r\n      }\r\n\r\n      const result = await response.json();\r\n      console.log(\"News updated successfully:\", result);\r\n      Swal.fire({\r\n                      icon: \"success\",\r\n                      title: \"Success\",\r\n                      text: \"Registration successful!\",\r\n                      showConfirmButton: false,\r\n                        });\r\n\r\n      setNewsData({ ...newsData, content: \"\" });\r\n      setError(null); // Clear any previous errors\r\n    } catch (error) {\r\n      setError(error.message || \"Error updating news\");\r\n      console.error(\"Error updating news:\", error);\r\n    }\r\n  };\r\n\r\n  const handleContentChange = (e) => {\r\n    setNewsData({ ...newsData, content: e.target.value });\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-h-screen bg-gray-100 py-20\">\r\n       <Helmet>\r\n              <title>Add News</title>\r\n            </Helmet>\r\n                      \r\n      <div className=\"max-w-2xl mx-auto bg-white p-8 rounded-lg shadow-lg\">\r\n        <h1 className=\"mb-6 pt-4 pb-8 text-center bg-clip-text text-transparent bg-gradient-to-r from-cyan-950 to-cyan-500 text-3xl sm:text-4xl md:text-5xl font-black\">\r\n          New News\r\n        </h1>\r\n\r\n        {error && <div className=\"mb-4 text-sm text-red-600\">{error}</div>}\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          <textarea\r\n            id=\"newsInput\"\r\n            placeholder=\"Enter news content here...\"\r\n            className=\"w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent resize-none\"\r\n            rows={6}\r\n            value={newsData.content}\r\n            onChange={handleContentChange}\r\n          />\r\n\r\n          <button\r\n            type=\"submit\"\r\n            className=\"mt-8 font-bold py-2 px-4 w-full rounded bg-cyan-800 hover:bg-cyan-600 transition-all duration-700 cursor-pointer text-white\"\r\n          >\r\n            Update News\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddNews;"],"names":["AddNews","newsData","setNewsData","useState","content","loading","setLoading","error","setError","token","localStorage","getItem","_jsxs","className","children","_jsx","Helmet","onSubmit","async","e","preventDefault","response","fetch","method","headers","Authorization","body","JSON","stringify","ok","errorData","json","Error","message","result","console","log","Swal","icon","title","text","showConfirmButton","id","placeholder","rows","value","onChange","target","type"],"sourceRoot":""}