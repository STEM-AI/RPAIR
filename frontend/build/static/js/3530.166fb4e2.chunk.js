"use strict";(self.webpackChunkforntend=self.webpackChunkforntend||[]).push([[3530],{3530:(e,a,t)=>{t.r(a),t.d(a,{default:()=>c});var l=t(2791),n=t(1830),s=t.n(n),r=t(2903),o=t(2187),i=t(4330),m=t(3050),d=t(184);const c=()=>{const[e,a]=(0,l.useState)([]),[t,n]=(0,l.useState)({event_name:"",competition:"",organization_info:{name:"",address:"",email:"",type:"",contacts:[{phone_number:""}]},name:"",robot_name:"",type:"",team_leader_name:"",team_leader_email:"",team_leader_phone_number:"",coach:[{name:"",email:"",phone_number:"",position:""}],members:[{name:"",email:"",phone_number:""}]}),[c,x]=(0,l.useState)(!1),[u,p]=(0,l.useState)(null),[b,h]=(0,l.useState)("");(0,l.useEffect)((()=>{t.competition&&g(t.competition)}),[t.competition]);const g=async e=>{try{const t=await r.Z.get(`https://rpair.org/api/competition/${e}/event/`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});a(t.data)}catch(t){console.error("Error fetching events:",t),a([])}},f=(e,a,l,s,r)=>{const o=e.target.value;n(r?e=>{const t=[...e[a][r]];return t[l][s]=o,{...e,[a]:{...e[a],[r]:t}}}:a?e=>({...e,[a]:Array.isArray(e[a])?e[a].map(((e,a)=>a===l?{...e,[s]:o}:e)):{...e[a],[s]:o}}):{...t,[e.target.name]:o})},y=(e,a,t,l,s)=>{let r=e.target.value;r=r.replace(/[^\d+]/g,""),r.startsWith("+2")||(r="+2"+r.replace("+","")),r.length>13&&(r=r.slice(0,13)),n(s?e=>{const n=[...e[a][s]];return n[t][l]=r,{...e,[a]:{...e[a],[s]:n}}}:a?e=>({...e,[a]:Array.isArray(e[a])?e[a].map(((e,a)=>a===t?{...e,[l]:r}:e)):{...e[a],[l]:r}}):a=>({...a,[e.target.name]:r}))},j=(e,a,t)=>{n(t?l=>({...l,[e]:{...l[e],[t]:[...l[e][t],a]}}):t=>({...t,[e]:[...t[e],a]}))},N=(e,a,t)=>{n(t?l=>({...l,[e]:{...l[e],[t]:l[e][t].filter(((e,t)=>t!==a))}}):t=>({...t,[e]:t[e].filter(((e,t)=>t!==a))}))},v=localStorage.getItem("access_token");if(!v)return(0,d.jsx)("div",{className:"text-red-600 text-center mt-8",children:"You are not authorized. Please log in."});return(0,d.jsxs)("div",{className:"max-w-4xl mx-auto bg-white p-6 rounded-lg shadow-lg",children:[(0,d.jsx)(m.ql,{children:(0,d.jsx)("title",{children:"Create Team"})}),(0,d.jsx)("h2",{className:"mb-5 py-2 text-transparent bg-clip-text bg-gradient-to-r from-cyan-800 to-cyan-500 text-3xl md:text-4xl font-black text-center",children:"Create a Team"}),(0,d.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),x(!0),p(null);try{const e=await r.Z.post("https://rpair.org/api/team/create/",t,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`}});return h("success"),p("Event created successfully!"),console.log("Response Data:",e.data),console.log(" Data:",t),s().fire({icon:"success",title:"Team Created!",text:"Team registration completed successfully!",showConfirmButton:!1,timer:2e3}),n({event_name:"",competition:"",organization_info:{name:"",address:"",email:"",type:"",contacts:[{phone_number:""}]},name:"",robot_name:"",type:"",team_leader_name:"",team_leader_email:"",team_leader_phone_number:"",coach:[{name:"",email:"",phone_number:"",position:""}],members:[{name:"",email:"",phone_number:""}]}),e.data}catch(o){var a,l;console.error("Error Response:",o.response);const e=(null===(a=o.response)||void 0===a?void 0:a.data)||{},t=[];e.name&&t.push("Team name is already registered"),e.robot_name&&t.push("Robot name is already taken"),null!==(l=e.organization_info)&&void 0!==l&&l.email&&t.push("Organization email is already registered"),e.team_leader_email&&t.push("Team leader email is already in use"),e.detail&&t.push(e.detail),0===t.length&&t.push("Failed to create team. Please check your inputs and try again."),s().fire({icon:"error",title:'<span style="color: #dc2626">Registration Failed</span>',html:`\n        <div class="text-left">\n          <p class="font-semibold">Please fix the following issues:</p>\n          <ul class="list-disc pl-5 mt-2">\n            ${t.map((e=>`<li>${e}</li>`)).join("")}\n          </ul>\n        </div>\n      `,confirmButtonColor:"#3085d6",confirmButtonText:"Try Again",scrollbarPadding:!1})}finally{x(!1)}},className:"grid gap-4",children:[(0,d.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4 mb-5",children:[(0,d.jsxs)("div",{className:"w-full md:w-1/2",children:[(0,d.jsx)("label",{className:"block mb-2 text-sm font-bold text-gray-700",children:"Competition"}),(0,d.jsxs)("select",{value:t.competition,onChange:e=>f(e,null,null,null,null),name:"competition",className:"bg-gray-200 border rounded py-2 px-4 w-full",required:!0,children:[(0,d.jsx)("option",{value:"",children:"Select Competition"}),(0,d.jsx)("option",{value:"vex_iq",children:"VEX IQ"}),(0,d.jsx)("option",{value:"vex_go",children:"VEX GO"}),(0,d.jsx)("option",{value:"vex_123",children:"VEX 123"})]})]}),(0,d.jsxs)("div",{className:"w-full md:w-1/2",children:[(0,d.jsx)("label",{className:"block mb-2 text-sm font-bold text-gray-700",children:"Event Name"}),(0,d.jsxs)("select",{value:t.event_name,onChange:e=>f(e,null,null,null,null),name:"event_name",className:"bg-gray-200 border rounded py-2 px-4 w-full",required:!0,disabled:!t.competition,children:[(0,d.jsx)("option",{value:"",children:"Select Event"}),e.map(((e,a)=>(0,d.jsx)("option",{value:e.name,children:e.name},a)))]})]})]}),(0,d.jsxs)("div",{className:"organizationInfo",children:[(0,d.jsx)("h3",{className:"py-2 text-transparent bg-clip-text bg-gradient-to-r from-cyan-800 to-cyan-500 text-2xl font-black",children:"Organization Info:"}),(0,d.jsxs)("div",{className:"md:flex md:justify-between",children:[(0,d.jsxs)("div",{className:"md:mr-2",children:[(0,d.jsx)("label",{className:"block mb-2 text-sm font-bold text-gray-700",children:"Organization Name"}),(0,d.jsx)("input",{type:"text",value:t.organization_info.name,onChange:e=>f(e,"organization_info",null,"name"),className:"bg-gray-200 border rounded py-2 px-4 w-full"})]}),(0,d.jsxs)("div",{className:"md:mr-2",children:[(0,d.jsx)("label",{className:"block mb-2 text-sm font-bold text-gray-700",children:"Address"}),(0,d.jsx)("input",{type:"text",value:t.organization_info.address,onChange:e=>f(e,"organization_info",null,"address"),className:"bg-gray-200 border rounded py-2 px-4 w-full"})]}),(0,d.jsxs)("div",{className:"md:mr-2",children:[(0,d.jsx)("label",{className:"block mb-2 text-sm font-bold text-gray-700",children:"Type"}),(0,d.jsxs)("select",{value:t.organization_info.type,onChange:e=>f(e,"organization_info",null,"type"),className:"bg-gray-200 border rounded py-2 px-4 w-full",required:!0,children:[(0,d.jsx)("option",{value:"",children:"Select Type"}),(0,d.jsx)("option",{value:"profite",children:"Profit"}),(0,d.jsx)("option",{value:"non-profite",children:"Non-Profit"})]})]})]}),(0,d.jsxs)("div",{className:"md:mr-2",children:[(0,d.jsx)("label",{className:"block mb-2 text-sm font-bold text-gray-700",children:"Email"}),(0,d.jsx)("input",{type:"email",value:t.organization_info.email,onChange:e=>f(e,"organization_info",null,"email"),className:"bg-gray-200 border rounded py-2 px-4 w-full"})]}),(0,d.jsx)("h4",{className:"mt-4 text-lg font-bold",children:"Contacts"}),t.organization_info.contacts.map(((e,a)=>(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)("input",{type:"text",placeholder:"enter your phone",pattern:"^\\+20\\d{10}$",title:"Phone number must start with +2 and contain 12 digits.",value:e.phone_number,onChange:e=>y(e,"organization_info",a,"phone_number","contacts"),className:"bg-gray-200 border rounded py-2 px-4 w-full",required:!0}),(0,d.jsx)("button",{type:"button",onClick:()=>N("organization_info",a,"contacts"),className:"text-red-500",children:(0,d.jsx)(i.Nnu,{size:24})})]},a))),(0,d.jsxs)("button",{type:"button",onClick:()=>j("organization_info",{phone_number:""},"contacts"),className:"text-cyan-500 flex items-center mt-2",children:[(0,d.jsx)(o.p8f,{size:24,className:"mr-1"})," Add Contact"]})]}),(0,d.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4 mb-5",children:[(0,d.jsxs)("div",{className:"w-full md:w-1/2",children:[(0,d.jsx)("label",{className:"block mb-2 text-sm font-bold text-gray-700",children:"Team Name"}),(0,d.jsx)("input",{type:"text",name:"name",value:t.name,onChange:f,className:"bg-gray-200 border rounded py-2 px-4 w-full",required:!0})]}),(0,d.jsxs)("div",{className:"w-full md:w-1/2",children:[(0,d.jsx)("label",{className:"block mb-2 text-sm font-bold text-gray-700",children:"Robot Name"}),(0,d.jsx)("input",{type:"text",name:"robot_name",value:t.robot_name,onChange:f,className:"bg-gray-200 border rounded py-2 px-4 w-full",required:!0})]})]}),(0,d.jsx)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4 mb-5",children:(0,d.jsxs)("div",{className:"w-full md:w-1/2",children:[(0,d.jsx)("label",{className:"block mb-2 text-sm font-bold text-gray-700",children:"Team Type"}),(0,d.jsxs)("select",{name:"type",value:t.type,onChange:f,className:"bg-gray-200 border rounded py-2 px-4 w-full",required:!0,children:[(0,d.jsx)("option",{value:"",children:"Select Type"}),(0,d.jsx)("option",{value:"profite",children:"Profit"}),(0,d.jsx)("option",{value:"non-profite",children:"Non-Profit"})]})]})}),(0,d.jsxs)("div",{className:"teamLeader",children:[(0,d.jsx)("h3",{className:"py-2 text-transparent bg-clip-text bg-gradient-to-r from-cyan-800 to-cyan-500 text-2xl font-black",children:"Team Leader Info:"}),(0,d.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4 mb-5",children:[(0,d.jsxs)("div",{className:"w-full md:w-1/2",children:[(0,d.jsx)("label",{className:"block mb-2 text-sm font-bold text-gray-700",children:"Name"}),(0,d.jsx)("input",{type:"text",name:"team_leader_name",value:t.team_leader_name,onChange:f,className:"bg-gray-200 border rounded py-2 px-4 w-full",required:!0})]}),(0,d.jsxs)("div",{className:"w-full md:w-1/2",children:[(0,d.jsx)("label",{className:"block mb-2 text-sm font-bold text-gray-700",children:"Email"}),(0,d.jsx)("input",{type:"email",name:"team_leader_email",value:t.team_leader_email,onChange:f,className:"bg-gray-200 border rounded py-2 px-4 w-full",required:!0})]})]}),(0,d.jsx)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4 mb-5",children:(0,d.jsxs)("div",{className:"w-full md:w-1/2",children:[(0,d.jsx)("label",{className:"block mb-2 text-sm font-bold text-gray-700",children:"Phone Number"}),(0,d.jsx)("input",{type:"text",name:"team_leader_phone_number",placeholder:"Phone number",pattern:"^\\+2\\d{11}$",title:"Phone number must start with +2 followed by 11 digits",value:t.team_leader_phone_number,onChange:e=>{let a=e.target.value;a=a.replace(/[^\d+]/g,""),a.startsWith("+2")||(a="+2"+a.replace("+","")),a.length>13&&(a=a.slice(0,13)),n({...t,team_leader_phone_number:a})},className:"bg-gray-200 border rounded py-2 px-4 w-full",required:!0})]})})]}),(0,d.jsxs)("div",{className:"coach",children:[(0,d.jsx)("h3",{className:"py-2 text-transparent bg-clip-text bg-gradient-to-r from-cyan-800 to-cyan-500 text-2xl font-black",children:"Coach Info:"}),t.coach.map(((e,a)=>(0,d.jsxs)("div",{className:"mb-5",children:[(0,d.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start gap-4",children:[(0,d.jsxs)("div",{className:"w-full md:w-1/2",children:[(0,d.jsx)("label",{className:"block mb-2 text-sm font-bold text-gray-700",children:"Name"}),(0,d.jsx)("input",{type:"text",value:e.name,onChange:e=>f(e,"coach",a,"name"),className:"bg-gray-200 border rounded py-2 px-4 w-full",required:!0})]}),(0,d.jsxs)("div",{className:"w-full md:w-1/2",children:[(0,d.jsx)("label",{className:"block mb-2 text-sm font-bold text-gray-700",children:"Email"}),(0,d.jsx)("input",{type:"email",value:e.email,onChange:e=>f(e,"coach",a,"email"),className:"bg-gray-200 border rounded py-2 px-4 w-full",required:!0})]})]}),(0,d.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start gap-4 mt-4",children:[(0,d.jsxs)("div",{className:"w-full md:w-1/2",children:[(0,d.jsx)("label",{className:"block mb-2 text-sm font-bold text-gray-700",children:"Phone Number"}),(0,d.jsx)("input",{type:"text",placeholder:"enter your phone",pattern:"^\\+2\\d{11}$",title:"Phone number must start with +2 followed by 11 digits.",value:e.phone_number,onChange:e=>y(e,"coach",a,"phone_number"),className:"bg-gray-200 border rounded py-2 px-4 w-full",required:!0})]}),(0,d.jsxs)("div",{className:"w-full md:w-1/2",children:[(0,d.jsx)("label",{className:"block mb-2 text-sm font-bold text-gray-700",children:"Position"}),(0,d.jsxs)("select",{value:e.position,onChange:e=>f(e,"coach",a,"position"),className:"bg-gray-200 border rounded py-2 px-4 w-full",required:!0,children:[(0,d.jsx)("option",{value:"",children:"Select Position"}),(0,d.jsx)("option",{value:"primary",children:"Primary"}),(0,d.jsx)("option",{value:"secondary",children:"Secondary"})]})]})]}),a>=1&&(0,d.jsx)("div",{className:"flex justify-center items-center gap-2 mt-4",children:(0,d.jsx)("button",{type:"button",onClick:()=>N("coach",a),children:(0,d.jsx)(i.Nnu,{className:"text-red-500 bg-white text-3xl hover:text-red-700"})})})]},a))),(0,d.jsxs)("button",{type:"button",onClick:()=>j("coach",{name:"",email:"",phone_number:"",position:""}),className:"text-cyan-500 flex items-center mt-2",children:[(0,d.jsx)(o.p8f,{size:24,className:"mr-1"})," Add Coach"]})]}),(0,d.jsxs)("div",{className:"members",children:[(0,d.jsx)("h3",{className:"py-2 text-transparent bg-clip-text bg-gradient-to-r from-cyan-800 to-cyan-500 text-2xl font-black",children:"Team Members:"}),t.members.map(((e,a)=>(0,d.jsxs)("div",{className:"mb-5",children:[(0,d.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start gap-4",children:[(0,d.jsxs)("div",{className:"w-full md:w-1/2",children:[(0,d.jsx)("label",{className:"block mb-2 text-sm font-bold text-gray-700",children:"Name"}),(0,d.jsx)("input",{type:"text",value:e.name,onChange:e=>f(e,"members",a,"name"),className:"bg-gray-200 border rounded py-2 px-4 w-full",required:!0})]}),(0,d.jsxs)("div",{className:"w-full md:w-1/2",children:[(0,d.jsx)("label",{className:"block mb-2 text-sm font-bold text-gray-700",children:"Email"}),(0,d.jsx)("input",{type:"email",value:e.email,onChange:e=>f(e,"members",a,"email"),className:"bg-gray-200 border rounded py-2 px-4 w-full",required:!0})]})]}),(0,d.jsx)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start gap-4 mt-4",children:(0,d.jsxs)("div",{className:"w-full md:w-1/2",children:[(0,d.jsx)("label",{className:"block mb-2 text-sm font-bold text-gray-700",children:"Phone Number"}),(0,d.jsx)("input",{type:"text",placeholder:"enter your phone",pattern:"^\\+2\\d{11}$",title:"Phone number must start with +2 followed by 11 digits.",value:e.phone_number,onChange:e=>y(e,"members",a,"phone_number"),className:"bg-gray-200 border rounded py-2 px-4 w-full",required:!0})]})}),a>=1&&(0,d.jsx)("div",{className:"flex justify-center items-center gap-2 mt-4",children:(0,d.jsx)("button",{type:"button",onClick:()=>N("members",a),children:(0,d.jsx)(i.Nnu,{className:"text-red-500 bg-white text-3xl hover:text-red-700"})})})]},a))),(0,d.jsxs)("button",{type:"button",onClick:()=>j("members",{name:"",email:"",phone_number:""}),className:"text-cyan-500 flex items-center mt-2",children:[(0,d.jsx)(o.p8f,{size:24,className:"mr-1"})," Add Member"]})]}),(0,d.jsx)("button",{type:"submit",disabled:c,className:"bg-cyan-800 text-white py-2 px-4 rounded hover:bg-cyan-600 "+(c?"opacity-50 cursor-not-allowed":""),children:c?"Creating Team...":"Create Team"})]})]})}}}]);
//# sourceMappingURL=3530.166fb4e2.chunk.js.map