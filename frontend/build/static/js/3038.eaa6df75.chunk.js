"use strict";(self.webpackChunkforntend=self.webpackChunkforntend||[]).push([[3038],{3038:(e,t,s)=>{s.r(t),s.d(t,{default:()=>h});var a=s(2791),n=s(1830),i=s.n(n),r=s(2903),l=s(8402),d=s(3553),o=s(2602),c=s(2187),m=s(7251),x=s(3974),u=s(184);function h(){const[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)(!0),[h,v]=(0,a.useState)(null),[g,y]=(0,a.useState)(null),[p,j]=(0,a.useState)(""),[f,b]=(0,a.useState)(!1),[N,_]=(0,a.useState)(!1),[S,E]=(0,a.useState)(null),[w,C]=(0,a.useState)([]),[A,T]=(0,a.useState)({competition_event:"",user:""}),[P,O]=(0,a.useState)(""),R=(0,o.s0)(),k=localStorage.getItem("access_token"),D=async()=>{var e,s;if(!k)return v("Authentication Error"),y("You are not authorized. Please log in."),j("error"),void n(!1);const a=`${{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL}/admin/judges/`;try{n(!0),v(null),y(null);const e=await r.Z.get(a,{headers:{Authorization:`Bearer ${k}`},timeout:1e4});t(e.data),n(!1)}catch(l){if(n(!1),v(l.message),"ECONNABORTED"===l.code)y("Request timed out. Please check your connection and try again.");else if(r.Z.isAxiosError(l)){var i;switch(null===(i=l.response)||void 0===i?void 0:i.status){case 401:y("Your session has expired. Please log in again.");break;case 403:y("You don't have permission to access these events.");break;case 404:y("The events resource was not found. Please try again later.");break;case 500:y("Server error. Please try again later.");break;default:y((null===(e=l.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||"Failed to fetch events. Please try again.")}}else y("An unexpected error occurred. Please try again.");j("error")}},L=async e=>{if(!k)return v("Authentication Error"),y("You are not authorized. Please log in."),void j("error");try{const t=`${{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL}/admin/judge/${encodeURIComponent(e)}/delete/`;await r.Z.delete(t,{headers:{Authorization:`Bearer ${k}`},timeout:1e4}),y("Judge deleted successfully"),j("success"),D()}catch(t){y("Failed to delete the judge"),j("error")}};return(0,a.useEffect)((()=>{D()}),[k]),(0,a.useEffect)((()=>{P&&(async()=>{if(!k||!P)return;const e=`${{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL}/admin/${P}/event-list/`;try{const t=await r.Z.get(e,{headers:{Authorization:`Bearer ${k}`}});C(t.data)}catch(t){v("Failed to fetch events. Please try again.")}})()}),[P,k]),(0,u.jsxs)("div",{className:"container max-w-7xl mx-auto px-4 py-8",children:[(0,u.jsxs)("h2",{className:"mb-12 text-center",children:[(0,u.jsx)("span",{className:"text-5xl font-bold bg-gradient-to-r from-cyan-600 to-cyan-400 bg-clip-text text-transparent",children:"All Judges"}),(0,u.jsx)("div",{className:"mt-2 h-1 bg-gradient-to-r from-cyan-500 to-cyan-300 w-24 mx-auto rounded-full"})]}),(0,u.jsxs)("div",{className:"mb-8 flex flex-col sm:flex-row gap-4 items-center justify-between",children:[(0,u.jsx)("div",{className:"w-full sm:max-w-xs",children:(0,u.jsx)("input",{type:"text",placeholder:"Search judges...",className:"w-full px-4 py-2 rounded-full border border-gray-200 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all"})}),(0,u.jsx)("button",{className:"w-full sm:w-auto px-6 py-2 bg-gradient-to-r from-cyan-600 to-cyan-400 text-white rounded-full hover:from-cyan-700 hover:to-cyan-500 transition-all shadow-sm hover:shadow-md",onClick:()=>R("/Dashboard/Admin/CreateStaff"),children:"Add New Judge +"})]}),s?(0,u.jsxs)("div",{className:"text-center py-12",children:[(0,u.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-cyan-500 border-t-transparent mx-auto"}),(0,u.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading judges..."})]}):h?(0,u.jsxs)(l.Z,{severity:"error",className:"mb-4 rounded-lg",children:[(0,u.jsx)(d.Z,{children:"Error"}),g]}):(0,u.jsxs)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[(0,u.jsx)("div",{className:"block md:hidden space-y-4 p-4",children:e.map((e=>{var t;return(0,u.jsxs)(m.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-sm border border-gray-100 p-4",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-cyan-800",children:e.username}),(0,u.jsxs)("div",{className:"flex gap-2",children:[(0,u.jsx)("button",{onClick:()=>{E(e.username),b(!0)},className:"p-1.5 text-cyan-600 hover:bg-cyan-50 rounded-lg",children:(0,u.jsx)(x.O9D,{size:20})}),(0,u.jsx)("button",{onClick:()=>L(e.username),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-lg",children:(0,u.jsx)(x.Ybf,{size:20})})]})]}),(null===(t=e.judging_events)||void 0===t?void 0:t.length)>0?(0,u.jsx)("div",{className:"space-y-3",children:e.judging_events.map((e=>(0,u.jsx)("div",{className:"bg-gray-50 p-3 rounded-lg",children:(0,u.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,u.jsx)("div",{className:"font-medium text-gray-500",children:"Event:"}),(0,u.jsx)("div",{className:"text-cyan-700",children:e.competition_event.name}),(0,u.jsx)("div",{className:"font-medium text-gray-500",children:"Dates:"}),(0,u.jsxs)("div",{className:"text-gray-600",children:[e.competition_event.start_date," - ",e.competition_event.end_date]}),(0,u.jsx)("div",{className:"font-medium text-gray-500",children:"Location:"}),(0,u.jsx)("div",{className:"text-gray-600",children:e.competition_event.location})]})},e.id)))}):(0,u.jsx)("div",{className:"text-center py-3 text-gray-400 bg-gray-50 rounded-lg",children:"No assigned events"})]},e.username)}))}),(0,u.jsx)("div",{className:"hidden md:block",children:(0,u.jsxs)("table",{className:"w-full",children:[(0,u.jsx)("thead",{className:"bg-gradient-to-r from-cyan-50 to-cyan-100",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-cyan-700",children:"Judge"}),(0,u.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-cyan-700",children:"Event"}),(0,u.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-cyan-700",children:"Dates"}),(0,u.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-cyan-700",children:"Location"}),(0,u.jsx)("th",{className:"px-6 py-4 text-center text-sm font-semibold text-cyan-700",children:"Actions"})]})}),(0,u.jsx)("tbody",{className:"divide-y divide-gray-100",children:e.map((e=>{var t,s,a;return(0,u.jsxs)(m.E.tr,{initial:{opacity:0},animate:{opacity:1},className:"hover:bg-gray-50 transition-colors",children:[(0,u.jsx)("td",{className:"px-6 py-4 font-medium text-cyan-900",children:e.username}),(0,u.jsx)("td",{className:"px-6 py-4",children:(null===(t=e.judging_events)||void 0===t?void 0:t.length)>0?e.judging_events.map((e=>(0,u.jsx)("div",{className:"text-sm text-gray-700",children:e.competition_event.name},e.id))):(0,u.jsx)("span",{className:"text-gray-400",children:"No events"})}),(0,u.jsx)("td",{className:"px-6 py-4",children:null===(s=e.judging_events)||void 0===s?void 0:s.map((e=>(0,u.jsxs)("div",{className:"text-sm text-gray-600",children:[e.competition_event.start_date," - ",e.competition_event.end_date]},e.id)))}),(0,u.jsx)("td",{className:"px-6 py-4",children:null===(a=e.judging_events)||void 0===a?void 0:a.map((e=>(0,u.jsx)("div",{className:"text-sm text-gray-600",children:e.competition_event.location},e.id)))}),(0,u.jsx)("td",{className:"px-6 py-4 text-center",children:(0,u.jsxs)("div",{className:"flex justify-center space-x-3",children:[(0,u.jsx)("button",{onClick:()=>{E(e.username),b(!0)},className:"text-cyan-600 hover:text-cyan-800 p-2 rounded-full hover:bg-cyan-50 transition-colors",children:(0,u.jsx)(x.O9D,{size:20})}),(0,u.jsx)("button",{onClick:()=>L(e.username),className:"text-red-600 hover:text-red-800 p-2 rounded-full hover:bg-red-50 transition-colors",children:(0,u.jsx)(x.Ybf,{size:20})})]})})]},e.username)}))})]})}),0===e.length&&!s&&(0,u.jsxs)("div",{className:"text-center py-16",children:[(0,u.jsx)("div",{className:"text-gray-400 mb-4",children:(0,u.jsx)(x.pBC,{size:48,className:"mx-auto"})}),(0,u.jsx)("h3",{className:"text-xl font-medium text-gray-500 mb-2",children:"No judges found"}),(0,u.jsx)("p",{className:"text-gray-400",children:"Start by adding your first judge"})]})]}),f&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,u.jsx)(m.E.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-2xl shadow-xl w-full max-w-md",children:(0,u.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),_(!0),y(null),j("");const t={user:S,competition_event:A.competition_event};try{await r.Z.post(`${{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL}/admin/judge-event/`,t,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${k}`}}),j("success"),y("Event assigned successfully!"),i().fire({icon:"success",title:"Success",text:"Event assigned successfully!",showConfirmButton:!1,timer:1500}),T({competition_event:"",user:""}),b(!1),D()}catch(n){var s,a;j("error"),y((null===(s=n.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.detail)||"Failed to assign the event. Please try again.")}finally{_(!1)}},className:"p-6",children:[(0,u.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,u.jsx)("h3",{className:"text-xl font-semibold text-cyan-800",children:"Assign Event"}),(0,u.jsx)("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600 p-1 rounded-full hover:bg-gray-100",children:(0,u.jsx)(c.bjh,{size:24})})]}),(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Enter Competition Name"}),(0,u.jsxs)("select",{type:"text",value:P,onChange:e=>{O(e.target.value)},placeholder:"e.g., vex_iq",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-cyan-500 focus:border-cyan-500",children:[(0,u.jsx)("option",{value:"",children:"Select an Competition"}),(0,u.jsx)("option",{value:"vex_iq",children:"Vex IQ"}),(0,u.jsx)("option",{value:"robotics",children:"Vex GO"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Event"}),(0,u.jsxs)("select",{name:"competition_event",value:A.competition_event,onChange:e=>{T({...A,[e.target.name]:e.target.value})},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-cyan-500 focus:border-cyan-500",required:!0,children:[(0,u.jsx)("option",{value:"",children:"Select an event"}),w.map((e=>(0,u.jsx)("option",{value:e.name,children:e.name},e.id)))]})]})]}),(0,u.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[(0,u.jsx)("button",{type:"button",onClick:()=>b(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md",children:"Cancel"}),(0,u.jsx)("button",{type:"submit",disabled:N,className:"px-4 py-2 text-sm font-medium text-white bg-cyan-600 hover:bg-cyan-700 rounded-md disabled:opacity-50",children:N?"Adding...":"Add Event"})]})]})})})]})}}}]);
//# sourceMappingURL=3038.eaa6df75.chunk.js.map