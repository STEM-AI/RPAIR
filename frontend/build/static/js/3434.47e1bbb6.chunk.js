"use strict";(self.webpackChunkforntend=self.webpackChunkforntend||[]).push([[3434],{3434:(e,t,r)=>{r.r(t),r.d(t,{default:()=>u});var n=r(2791),s=r(2903),a=r(8402),o=r(3553),i=r(1909),l=r(2602),c=r(4022),m=r(8408),d=r(184);function u(){const{setCurrentCompetition:e}=(0,m.B)(),[t,r]=(0,n.useState)([]),[u,p]=(0,n.useState)(!0),[h,g]=(0,n.useState)(null),[x,y]=(0,n.useState)(null),[f,v]=(0,n.useState)(""),b=localStorage.getItem("access_token"),j=e=>{if(e<60)return`${e} minutes`;const t=Math.floor(e/60);if(t<24)return`${t}h ${e%60}m`;return`${Math.floor(t/24)}d ${t%24}h`},N=async()=>{var e,t;const{access_token:n}=(0,c.lz)();if(!n)return g("Authentication Error"),y("You are not authorized. Please log in."),v("error"),void p(!1);try{p(!0),g(null),y(null);const e=await c.CR.get("https://rpair.org/api/event/judge-event-list/",{headers:{Authorization:`Bearer ${n}`},timeout:1e4});r(e.data),console.log(e.data),p(!1)}catch(o){if(p(!1),g(o.message),"ECONNABORTED"===o.code)y("Request timed out. Please check your connection and try again.");else if(s.Z.isAxiosError(o)){var a;switch(null===(a=o.response)||void 0===a?void 0:a.status){case 401:y("Your session has expired. Please log in again.");break;case 403:y("You don't have permission to access these events.");break;case 404:y("The events resource was not found. Please try again later.");break;case 500:y("Server error. Please try again later.");break;default:y((null===(e=o.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to fetch events. Please try again.")}}else y("An unexpected error occurred. Please try again.");v("error")}};(0,n.useEffect)((()=>{N()}),[b]);const w=()=>{N()};return u?(0,d.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,d.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):h?(0,d.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,d.jsxs)("div",{className:"max-w-2xl mx-auto text-center",children:[(0,d.jsx)(i.vVM,{className:"mx-auto h-16 w-16 text-red-500 mb-4"}),(0,d.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error Loading Events"}),(0,d.jsx)("p",{className:"text-gray-600 mb-6",children:x}),(0,d.jsxs)("button",{onClick:w,className:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 \r text-white font-medium rounded-lg transition-colors duration-200",children:[(0,d.jsx)(i.la_,{className:"h-5 w-5 mr-2"}),"Retry Loading"]})]})}):(0,d.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-10",children:[(0,d.jsx)("h2",{className:"mb-4 tracking-tight text-center bg-clip-text text-transparent bg-gradient-to-r from-cyan-950 to-cyan-600 text-5xl font-black",children:"Your Events"}),(0,d.jsxs)("button",{onClick:w,className:"inline-flex items-center px-4 py-2 bg-clip-text text-transparent bg-gradient-to-r from-cyan-950 to-cyan-600 hover:text-cyan-700 \r font-medium rounded-lg transition-colors duration-200",children:[(0,d.jsx)(i.la_,{className:"h-5 w-5 mr-2 text-cyan-800"}),"Refresh"]})]}),x&&(0,d.jsx)("div",{className:"max-w-2xl mx-auto mb-8",children:(0,d.jsxs)(a.Z,{severity:f,className:"rounded-lg shadow-md",onClose:()=>y(null),children:[(0,d.jsx)(o.Z,{className:"font-semibold",children:"success"===f?"Success":"Error"}),x]})}),0===t.length?(0,d.jsxs)("div",{className:"text-center py-12",children:[(0,d.jsx)(i.I5p,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,d.jsx)("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"No Events Found"}),(0,d.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"There are currently no events assigned to you."})]}):(0,d.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.map(((t,r)=>{const n=((e,t)=>{const r=new Date,n=new Date(e),s=new Date(t),a=new Date(s.getTime()+864e5);return r<n?{status:"upcoming",message:"Not Started",timeLeft:Math.floor((n-r)/6e4),color:"bg-yellow-600 hover:bg-yellow-700",icon:i.Tmq}:r<=a?{status:"in_progress",message:"Start Judging",timeLeft:Math.floor((a-r)/6e4),color:"bg-green-600 hover:bg-green-700",icon:i.Nhx}:{status:"ended",message:"Event Ended",timeLeft:0,color:"bg-gray-600 hover:bg-gray-700",icon:i.vB0}})(t.competition_event.start_date,t.competition_event.end_date);return(0,d.jsxs)("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 \r transform hover:-translate-y-1 overflow-hidden border border-gray-100",children:[(0,d.jsxs)("div",{className:"p-6",children:[(0,d.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,d.jsx)("h3",{className:"text-xl font-bold text-gray-900 line-clamp-2",children:t.competition_event.name}),(0,d.jsxs)("span",{className:`\n                      px-2 py-1 text-xs font-semibold rounded-full\n                      ${"upcoming"===n.status?"bg-yellow-100 text-yellow-800":"in_progress"===n.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}\n                    `,children:["upcoming"===n.status&&n.timeLeft>0&&`Starts in ${j(n.timeLeft)}`,"in_progress"===n.status&&`Ends in ${j(n.timeLeft)}`,"ended"===n.status&&"Ended"]})]}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,d.jsx)(i.mbS,{className:"h-5 w-5 mr-2 text-blue-600 flex-shrink-0"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium",children:"Start Date"}),(0,d.jsx)("p",{className:"text-sm",children:new Date(t.competition_event.start_date).toLocaleDateString()})]})]}),(0,d.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,d.jsx)(i.$0r,{className:"h-5 w-5 mr-2 text-blue-600 flex-shrink-0"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium",children:"Location"}),(0,d.jsx)("p",{className:"text-sm line-clamp-1",children:t.competition_event.location||"No location specified"})]})]})]})]}),(0,d.jsx)(l.rU,{onClick:()=>e(t.competition_event.name),to:`/Dashboard/JudgeEvent/${t.competition_event.competition_name}`,children:(0,d.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100",children:(0,d.jsxs)("button",{className:`w-full py-2 px-4 ${n.color} text-white font-medium rounded-lg \n                        transition-colors duration-200 flex items-center justify-center`,disabled:"ended"===n.status,children:[(0,d.jsx)(n.icon,{className:"h-5 w-5 mr-2"}),n.message]})})})]},r)}))})]})}},3553:(e,t,r)=>{r.d(t,{Z:()=>w});var n=r(2791),s=r(3733),a=r(4419),o=r(6934),i=r(5141),l=r(8357),c=r(2839),m=r(4036),d=r(2036),u=r(5878),p=r(1217);function h(e){return(0,p.ZP)("MuiTypography",e)}(0,u.Z)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);var g=r(184);const x={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},y=(0,c.u7)(),f=(0,o.ZP)("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.variant&&t[r.variant],"inherit"!==r.align&&t[`align${(0,m.Z)(r.align)}`],r.noWrap&&t.noWrap,r.gutterBottom&&t.gutterBottom,r.paragraph&&t.paragraph]}})((0,i.Z)((e=>{let{theme:t}=e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(t.typography).filter((e=>{let[t,r]=e;return"inherit"!==t&&r&&"object"===typeof r})).map((e=>{let[t,r]=e;return{props:{variant:t},style:r}})),...Object.entries(t.palette).filter((0,d.Z)()).map((e=>{let[r]=e;return{props:{color:r},style:{color:(t.vars||t).palette[r].main}}})),...Object.entries(t.palette?.text||{}).filter((e=>{let[,t]=e;return"string"===typeof t})).map((e=>{let[r]=e;return{props:{color:`text${(0,m.Z)(r)}`},style:{color:(t.vars||t).palette.text[r]}}})),{props:e=>{let{ownerState:t}=e;return"inherit"!==t.align},style:{textAlign:"var(--Typography-textAlign)"}},{props:e=>{let{ownerState:t}=e;return t.noWrap},style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:e=>{let{ownerState:t}=e;return t.gutterBottom},style:{marginBottom:"0.35em"}},{props:e=>{let{ownerState:t}=e;return t.paragraph},style:{marginBottom:16}}]}}))),v={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},b=n.forwardRef((function(e,t){const{color:r,...n}=(0,l.i)({props:e,name:"MuiTypography"}),o=y({...n,...!x[r]&&{color:r}}),{align:i="inherit",className:c,component:d,gutterBottom:u=!1,noWrap:p=!1,paragraph:b=!1,variant:j="body1",variantMapping:N=v,...w}=o,Z={...o,align:i,color:r,className:c,component:d,gutterBottom:u,noWrap:p,paragraph:b,variant:j,variantMapping:N},S=d||(b?"p":N[j]||v[j])||"span",k=(e=>{const{align:t,gutterBottom:r,noWrap:n,paragraph:s,variant:o,classes:i}=e,l={root:["root",o,"inherit"!==e.align&&`align${(0,m.Z)(t)}`,r&&"gutterBottom",n&&"noWrap",s&&"paragraph"]};return(0,a.Z)(l,h,i)})(Z);return(0,g.jsx)(f,{as:S,ref:t,className:(0,s.Z)(k.root,c),...w,ownerState:Z,style:{..."inherit"!==i&&{"--Typography-textAlign":i},...w.style}})}));function j(e){return(0,p.ZP)("MuiAlertTitle",e)}(0,u.Z)("MuiAlertTitle",["root"]);const N=(0,o.ZP)(b,{name:"MuiAlertTitle",slot:"Root",overridesResolver:(e,t)=>t.root})((0,i.Z)((e=>{let{theme:t}=e;return{fontWeight:t.typography.fontWeightMedium,marginTop:-2}}))),w=n.forwardRef((function(e,t){const r=(0,l.i)({props:e,name:"MuiAlertTitle"}),{className:n,...o}=r,i=r,c=(e=>{const{classes:t}=e;return(0,a.Z)({root:["root"]},j,t)})(i);return(0,g.jsx)(N,{gutterBottom:!0,component:"div",ownerState:i,ref:t,className:(0,s.Z)(c.root,n),...o})}))},2839:(e,t,r)=>{r.d(t,{zY:()=>u,u7:()=>p});r(2791);var n=r(8519),s=r(2554),a=r(184);function o(e){const{styles:t,defaultTheme:r={}}=e,n="function"===typeof t?e=>{return t(void 0===(n=e)||null===n||0===Object.keys(n).length?r:e);var n}:t;return(0,a.jsx)(s.xB,{styles:n})}var i=r(449);const l=function(e){let{styles:t,themeId:r,defaultTheme:n={}}=e;const s=(0,i.Z)(n),l="function"===typeof t?t(r&&s[r]||s):t;return(0,a.jsx)(o,{styles:l})};var c=r(6482),m=r(988);const d=function(e){return(0,a.jsx)(l,{...e,defaultTheme:c.Z,themeId:m.Z})};function u(e){return function(t){return(0,a.jsx)(d,{styles:"function"===typeof e?r=>e({theme:r,...t}):e})}}function p(){return n.Z}},8519:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(7093),s=r(3044);const a=e=>{const t={systemProps:{},otherProps:{}},r=e?.theme?.unstable_sxConfig??s.Z;return Object.keys(e).forEach((n=>{r[n]?t.systemProps[n]=e[n]:t.otherProps[n]=e[n]})),t};function o(e){const{sx:t,...r}=e,{systemProps:s,otherProps:o}=a(r);let i;return i=Array.isArray(t)?[s,...t]:"function"===typeof t?function(){const e=t(...arguments);return(0,n.P)(e)?{...s,...e}:s}:{...s,...t},{...o,sx:i}}}}]);
//# sourceMappingURL=3434.47e1bbb6.chunk.js.map