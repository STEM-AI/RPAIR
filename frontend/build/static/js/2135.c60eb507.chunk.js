"use strict";(self.webpackChunkforntend=self.webpackChunkforntend||[]).push([[2135],{2135:(e,t,r)=>{r.r(t),r.d(t,{default:()=>m});var s=r(2791),a=r(2903),n=r(8402),o=r(3553),i=r(1909),l=r(2602),c=r(2942),d=r(184);function m(){const{competition_name:e}=(0,l.UO)(),[t,r]=(0,s.useState)([]),[m,u]=(0,s.useState)(!0),[h,p]=(0,s.useState)(null),[x,g]=(0,s.useState)(null),[f,y]=(0,s.useState)(""),v=localStorage.getItem("access_token"),b=e=>{if(e<60)return`${e} minutes`;const t=Math.floor(e/60);if(t<24)return`${t}h ${e%60}m`;return`${Math.floor(t/24)}d ${t%24}h`},j=async()=>{var t,s;if(!v)return p("Authentication Error"),g("You are not authorized. Please log in."),y("error"),void u(!1);const n=`${{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL}/admin/${e}/event-list/`;try{u(!0),p(null),g(null);const e=await a.Z.get(n,{headers:{Authorization:`Bearer ${v}`},timeout:1e4});r(e.data),u(!1)}catch(i){if(u(!1),p(i.message),"ECONNABORTED"===i.code)g("Request timed out. Please check your connection and try again.");else if(a.Z.isAxiosError(i)){var o;switch(null===(o=i.response)||void 0===o?void 0:o.status){case 401:g("Your session has expired. Please log in again.");break;case 403:g("You don't have permission to access these events.");break;case 404:g("The events resource was not found. Please try again later.");break;case 500:g("Server error. Please try again later.");break;default:g((null===(t=i.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to fetch events. Please try again.")}}else g("An unexpected error occurred. Please try again.");y("error")}};(0,s.useEffect)((()=>{j()}),[v]);const N=()=>{j()};return m?(0,d.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,d.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):h?(0,d.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,d.jsxs)("div",{className:"max-w-2xl mx-auto text-center",children:[(0,d.jsx)(i.vVM,{className:"mx-auto h-16 w-16 text-red-500 mb-4"}),(0,d.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error Loading Events"}),(0,d.jsx)("p",{className:"text-gray-600 mb-6",children:x}),(0,d.jsxs)("button",{onClick:N,className:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 \r text-white font-medium rounded-lg transition-colors duration-200",children:[(0,d.jsx)(i.la_,{className:"h-5 w-5 mr-2"}),"Retry Loading"]})]})}):(0,d.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-10",children:[(0,d.jsx)("h2",{className:"mb-4 tracking-tight text-center bg-clip-text text-transparent bg-gradient-to-r from-cyan-950 to-cyan-600 text-5xl font-black",children:"All Events"}),(0,d.jsxs)("button",{onClick:N,className:"inline-flex items-center px-4 py-2 bg-clip-text text-transparent bg-gradient-to-r from-cyan-950 to-cyan-600 hover:text-cyan-700 \r font-medium rounded-lg transition-colors duration-200",children:[(0,d.jsx)(i.la_,{className:"h-5 w-5 mr-2 text-cyan-800"}),"Refresh"]})]}),x&&(0,d.jsx)("div",{className:"max-w-2xl mx-auto mb-8",children:(0,d.jsxs)(n.Z,{severity:f,className:"rounded-lg shadow-md",onClose:()=>g(null),children:[(0,d.jsx)(o.Z,{className:"font-semibold",children:"success"===f?"Success":"Error"}),x]})}),0===t.length?(0,d.jsxs)("div",{className:"text-center py-12",children:[(0,d.jsx)(i.I5p,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,d.jsx)("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"No Events Found"}),(0,d.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"There are currently no events assigned to you."})]}):(0,d.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.map(((t,r)=>{const s=((e,t)=>{const r=new Date,s=new Date(e),a=new Date(t),n=JSON.parse(localStorage.getItem("user_role"))||{},o=n.is_superuser||n.is_staff;return r<s?{status:"upcoming",message:o?"Not Started":"Join",timeLeft:Math.floor((s-r)/6e4),color:"bg-yellow-600 hover:bg-yellow-700",icon:o?i.Tmq:c.yrM}:r>=s&&r<=a?{status:"in_progress",message:"Start Judging",timeLeft:Math.floor((a-r)/6e4),color:"bg-green-600 hover:bg-green-700",icon:i.Nhx}:{status:"ended",message:"Event Ended",timeLeft:0,color:"bg-gray-600 hover:bg-gray-700",icon:i.vB0}})(t.start_date,t.end_date);return(0,d.jsxs)("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 \r transform hover:-translate-y-1 overflow-hidden border border-gray-100",children:[(0,d.jsxs)("div",{className:"p-6",children:[(0,d.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,d.jsx)("h3",{className:"text-xl font-bold text-gray-900 line-clamp-2",children:t.name}),(0,d.jsxs)("span",{className:`\n                      px-2 py-1 text-xs font-semibold rounded-full\n                      ${"upcoming"===s.status?"bg-yellow-100 text-yellow-800":"in_progress"===s.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}\n                    `,children:["upcoming"===s.status&&s.timeLeft>0&&`Starts in ${b(s.timeLeft)}`,"in_progress"===s.status&&`Ends in ${b(s.timeLeft)}`,"ended"===s.status&&"Ended"]})]}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,d.jsx)(i.mbS,{className:"h-5 w-5 mr-2 text-blue-600 flex-shrink-0"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium",children:"Start Date"}),(0,d.jsx)("p",{className:"text-sm",children:new Date(t.start_date).toLocaleDateString()})]})]}),(0,d.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,d.jsx)(i.dKE,{className:"h-5 w-5 mr-2 text-blue-600 flex-shrink-0"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium",children:"End Date"}),(0,d.jsx)("p",{className:"text-sm",children:new Date(t.end_date).toLocaleDateString()})]})]}),(0,d.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,d.jsx)(i.$0r,{className:"h-5 w-5 mr-2 text-blue-600 flex-shrink-0"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium",children:"Location"}),(0,d.jsx)("p",{className:"text-sm line-clamp-1",children:t.location||"No location specified"})]})]})]})]}),(0,d.jsx)(l.rU,{to:`/Dashboard/Event/${e}/${t.name}`,onClick:()=>localStorage.setItem("event_name",t.name),children:(0,d.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100",children:(0,d.jsxs)("button",{className:`w-full py-2 px-4 ${s.color} text-white font-medium rounded-lg \n        transition-colors duration-200 flex items-center justify-center`,disabled:"ended"===s.status,children:[(0,d.jsx)(s.icon,{className:"h-5 w-5 mr-2"}),s.message]})})})]},r)}))})]})}},3553:(e,t,r)=>{r.d(t,{Z:()=>w});var s=r(2791),a=r(3733),n=r(4419),o=r(6934),i=r(5141),l=r(8357),c=r(2839),d=r(4036),m=r(2036),u=r(5878),h=r(1217);function p(e){return(0,h.ZP)("MuiTypography",e)}(0,u.Z)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);var x=r(184);const g={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},f=(0,c.u7)(),y=(0,o.ZP)("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.variant&&t[r.variant],"inherit"!==r.align&&t[`align${(0,d.Z)(r.align)}`],r.noWrap&&t.noWrap,r.gutterBottom&&t.gutterBottom,r.paragraph&&t.paragraph]}})((0,i.Z)((e=>{let{theme:t}=e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(t.typography).filter((e=>{let[t,r]=e;return"inherit"!==t&&r&&"object"===typeof r})).map((e=>{let[t,r]=e;return{props:{variant:t},style:r}})),...Object.entries(t.palette).filter((0,m.Z)()).map((e=>{let[r]=e;return{props:{color:r},style:{color:(t.vars||t).palette[r].main}}})),...Object.entries(t.palette?.text||{}).filter((e=>{let[,t]=e;return"string"===typeof t})).map((e=>{let[r]=e;return{props:{color:`text${(0,d.Z)(r)}`},style:{color:(t.vars||t).palette.text[r]}}})),{props:e=>{let{ownerState:t}=e;return"inherit"!==t.align},style:{textAlign:"var(--Typography-textAlign)"}},{props:e=>{let{ownerState:t}=e;return t.noWrap},style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:e=>{let{ownerState:t}=e;return t.gutterBottom},style:{marginBottom:"0.35em"}},{props:e=>{let{ownerState:t}=e;return t.paragraph},style:{marginBottom:16}}]}}))),v={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},b=s.forwardRef((function(e,t){const{color:r,...s}=(0,l.i)({props:e,name:"MuiTypography"}),o=f({...s,...!g[r]&&{color:r}}),{align:i="inherit",className:c,component:m,gutterBottom:u=!1,noWrap:h=!1,paragraph:b=!1,variant:j="body1",variantMapping:N=v,...w}=o,S={...o,align:i,color:r,className:c,component:m,gutterBottom:u,noWrap:h,paragraph:b,variant:j,variantMapping:N},_=m||(b?"p":N[j]||v[j])||"span",Z=(e=>{const{align:t,gutterBottom:r,noWrap:s,paragraph:a,variant:o,classes:i}=e,l={root:["root",o,"inherit"!==e.align&&`align${(0,d.Z)(t)}`,r&&"gutterBottom",s&&"noWrap",a&&"paragraph"]};return(0,n.Z)(l,p,i)})(S);return(0,x.jsx)(y,{as:_,ref:t,className:(0,a.Z)(Z.root,c),...w,ownerState:S,style:{..."inherit"!==i&&{"--Typography-textAlign":i},...w.style}})}));function j(e){return(0,h.ZP)("MuiAlertTitle",e)}(0,u.Z)("MuiAlertTitle",["root"]);const N=(0,o.ZP)(b,{name:"MuiAlertTitle",slot:"Root",overridesResolver:(e,t)=>t.root})((0,i.Z)((e=>{let{theme:t}=e;return{fontWeight:t.typography.fontWeightMedium,marginTop:-2}}))),w=s.forwardRef((function(e,t){const r=(0,l.i)({props:e,name:"MuiAlertTitle"}),{className:s,...o}=r,i=r,c=(e=>{const{classes:t}=e;return(0,n.Z)({root:["root"]},j,t)})(i);return(0,x.jsx)(N,{gutterBottom:!0,component:"div",ownerState:i,ref:t,className:(0,a.Z)(c.root,s),...o})}))},2839:(e,t,r)=>{r.d(t,{zY:()=>u,u7:()=>h});r(2791);var s=r(8519),a=r(2554),n=r(184);function o(e){const{styles:t,defaultTheme:r={}}=e,s="function"===typeof t?e=>{return t(void 0===(s=e)||null===s||0===Object.keys(s).length?r:e);var s}:t;return(0,n.jsx)(a.xB,{styles:s})}var i=r(449);const l=function(e){let{styles:t,themeId:r,defaultTheme:s={}}=e;const a=(0,i.Z)(s),l="function"===typeof t?t(r&&a[r]||a):t;return(0,n.jsx)(o,{styles:l})};var c=r(6482),d=r(988);const m=function(e){return(0,n.jsx)(l,{...e,defaultTheme:c.Z,themeId:d.Z})};function u(e){return function(t){return(0,n.jsx)(m,{styles:"function"===typeof e?r=>e({theme:r,...t}):e})}}function h(){return s.Z}},8519:(e,t,r)=>{r.d(t,{Z:()=>o});var s=r(7093),a=r(3044);const n=e=>{const t={systemProps:{},otherProps:{}},r=e?.theme?.unstable_sxConfig??a.Z;return Object.keys(e).forEach((s=>{r[s]?t.systemProps[s]=e[s]:t.otherProps[s]=e[s]})),t};function o(e){const{sx:t,...r}=e,{systemProps:a,otherProps:o}=n(r);let i;return i=Array.isArray(t)?[a,...t]:"function"===typeof t?function(){const e=t(...arguments);return(0,s.P)(e)?{...a,...e}:a}:{...a,...t},{...o,sx:i}}}}]);
//# sourceMappingURL=2135.c60eb507.chunk.js.map