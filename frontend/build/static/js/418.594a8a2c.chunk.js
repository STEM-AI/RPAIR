"use strict";(self.webpackChunkforntend=self.webpackChunkforntend||[]).push([[418],{418:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var n=a(2791),r=a(1830),s=a.n(r),o=a(2903),i=a(3050),l=a(184);const c=function(){const[e,t]=(0,n.useState)({first_name:"",last_name:"",username:"",email:"",country:"",phone_number:"",date_of_birth:"",address:""}),[a,r]=(0,n.useState)(!0),[c,d]=(0,n.useState)(null),[u,m]=(0,n.useState)(!1),h=localStorage.getItem("access_token");(0,n.useEffect)((()=>{(async()=>{if(!h)return d("Authentication Error"),void r(!1);try{const{data:e}=await o.Z.get("https://rpair.org/api/user/data/profile/",{headers:{Authorization:`Bearer ${h}`}});t({first_name:e.first_name||"",last_name:e.last_name||"",username:e.username||"",email:e.email||"",country:e.country||"",phone_number:e.phone_number||"",date_of_birth:e.date_of_birth||"",address:e.address||""})}catch{d("Failed to load user data")}finally{r(!1)}})()}),[h]);const f=a=>{t({...e,[a.target.name]:a.target.value})};return a?(0,l.jsx)("p",{className:"text-center text-cyan-600",children:"Loading..."}):c?(0,l.jsx)("p",{className:"text-center text-red-600",children:c}):(0,l.jsxs)("div",{className:"max-w-3xl mx-auto bg-white p-8 shadow-lg rounded-xl mt-10 border border-gray-200",children:[(0,l.jsx)(i.ql,{children:(0,l.jsx)("title",{children:"Account Settings"})}),(0,l.jsx)("h2",{className:"text-3xl font-bold text-cyan-600 mb-6 text-center",children:"Account Settings"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[Object.keys(e).map((t=>(0,l.jsxs)("div",{className:"col-span-2 sm:col-span-1",children:[(0,l.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:t.replace("_"," ").toUpperCase()}),(0,l.jsx)("input",{type:"email"===t?"email":"text",name:t,value:e[t],onChange:"phone_number"===t||"date_of_birth"===t?void 0:f,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-600 focus:border-cyan-600",readOnly:"phone_number"===t||"date_of_birth"===t})]},t))),(0,l.jsx)("div",{className:"col-span-2 flex justify-center",children:(0,l.jsx)("button",{onClick:async()=>{if(!h)return void d("Authentication Error");m(!0);const t={first_name:e.first_name,last_name:e.last_name,username:e.username,email:e.email,country:e.country};try{await o.Z.patch("https://rpair.org/api/user/data/edit-profile/",t,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${h}`}}),s().fire({icon:"success",title:"Success",text:"Profile updated successfully!",showConfirmButton:!1})}catch(c){var a,n;s().fire({icon:"error",title:"Error",text:(null===(a=c.response)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.message)||"Failed to save changes"})}finally{m(!1)}},disabled:u,className:"w-1/2 bg-cyan-600 text-white py-3 rounded-lg font-semibold hover:bg-cyan-700 transition text-lg",children:u?"Saving...":"Save Changes"})})]})]})}}}]);
//# sourceMappingURL=418.594a8a2c.chunk.js.map