"use strict";(self.webpackChunkforntend=self.webpackChunkforntend||[]).push([[995],{3791:(e,t,s)=>{s.d(t,{Z:()=>r});var a=s(2791),l=s(2903);const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-id";const[r,n]=(0,a.useState)([]),[i,c]=(0,a.useState)(!0),[d,o]=(0,a.useState)(null),x=localStorage.getItem("access_token"),m=async()=>{try{const a=await l.Z.get(`https://rpair.org/api/core/event/${e}/schedule/`,{params:{ordering:s,stage:t},headers:{Authorization:`Bearer ${x}`}});n(a.data)}catch(a){o(a.message||"Failed to fetch schedules")}finally{c(!1)}};return(0,a.useEffect)((()=>{e&&m()}),[e,s,t]),{schedules:r,loading:i,error:d,refetch:m}}},5442:(e,t,s)=>{s.d(t,{Z:()=>r});var a=s(2791),l=s(2903);const r=e=>{const[t,s]=(0,a.useState)(null),[r,n]=(0,a.useState)(!0),[i,c]=(0,a.useState)(null),d=localStorage.getItem("access_token");return(0,a.useEffect)((()=>{e?(async()=>{try{const t=await l.Z.get(`https://rpair.org/api/core/event/schedule/${e}/`,{headers:{Authorization:`Bearer ${d}`}});s(t.data)}catch(t){c(t.message||"Failed to fetch schedule details")}finally{n(!1)}})():(c("Schedule ID is required"),n(!1))}),[e]),{schedule:t,loading:r,error:i}}},995:(e,t,s)=>{s.r(t),s.d(t,{default:()=>h});s(6457);var a=s(2791),l=s(2202),r=s(3859),n=s(4097),i=s(8408),c=s(2903),d=(s(1830),s(6083)),o=s(5442),x=s(3791),m=s(184);const h=()=>{var e,t,s,h,g,u,p,y,j;const{currentCompetition:f}=(0,i.B)(),{matches:v,setCurrentMatch:b}=(0,r.a)(),[N,w]=(0,a.useState)(!1),[k,S]=(0,a.useState)("driver_go"),[C,_]=(0,a.useState)({driver_go:[],coding:[]}),[Z,$]=(0,a.useState)(1),[M,E]=(0,a.useState)({}),[T,D]=(0,a.useState)([]),[I,z]=(0,a.useState)(!1),[A,B]=(0,a.useState)(null),[F,R]=(0,a.useState)([]),[q,H]=(0,a.useState)(null),[L,G]=(0,a.useState)(!1),[P,U]=(0,a.useState)(null),V=f,W=localStorage.getItem("access_token"),[J,K]=(0,a.useState)({driver_go:{1:null,2:null,3:null},coding:{1:null,2:null,3:null}}),{schedules:O,loading:Q,error:X,refetch:Y}=(0,x.Z)(V,"driver_go","-id"),{schedules:ee,loading:te,error:se,refetch:ae}=(0,x.Z)(V,"coding","-id"),le=()=>{Y(),ae()},re=(0,o.Z)(null===(e=O[0])||void 0===e?void 0:e.id),ne=(0,o.Z)(null===(t=O[1])||void 0===t?void 0:t.id),ie=(0,o.Z)(null===(s=O[2])||void 0===s?void 0:s.id),ce=(0,o.Z)(null===(h=ee[0])||void 0===h?void 0:h.id),de=(0,o.Z)(null===(g=ee[1])||void 0===g?void 0:g.id),oe=(0,o.Z)(null===(u=ee[2])||void 0===u?void 0:u.id);(0,a.useEffect)((()=>{(re||ne||ie)&&(K((e=>({...e,driver_go:{1:re,2:ne,3:ie}}))),R([re,ne,ie]))}),[re,ne,ie]),(0,a.useEffect)((()=>{(ce||de||oe)&&(K((e=>({...e,coding:{1:ce,2:de,3:oe}}))),R([ce,de,oe]))}),[ce,de,oe]),(0,a.useEffect)((()=>{G(Q||te),U(X||se)}),[Q,te,X,se]);(0,a.useEffect)((()=>{R([J[k][1],J[k][2],J[k][3]])}),[k,J]);C[k].includes(Z);const xe=async()=>{z(!0),B(null);try{const e=await c.Z.get(`https://rpair.org/api/vex-go/${V}/skills/rank/`,{headers:{Authorization:`Bearer ${W}`}});D(e.data)}catch(A){console.error("Error fetching coop rankings:",A),B(A.message)}finally{z(!1)}},me=e=>{const t=e%60;return`${Math.floor(e/60)}:${t<10?"0":""}${t}`};return(0,m.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:q?(0,m.jsx)(n.Z,{selectedMatch:q,eventName:V,onClose:()=>H(null),challengeType:"driver_go"===k?"Driving Challenge":"Coding Challenge"}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(d.Z,{className:"mb-6"}),(0,m.jsxs)("div",{className:"text-center mb-8",children:[(0,m.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent mb-4",children:"\u26a1 Skills Challenge"}),(0,m.jsx)("div",{className:"flex justify-center gap-4 mb-8",children:[{id:"driver_go",label:"Driving Challenge",icon:"\ud83d\ude97",color:"blue"},{id:"coding",label:"Coding Challenge",icon:"\ud83e\udd16",color:"blue"}].map((e=>(0,m.jsxs)("button",{onClick:()=>{S(e.id),$(1),le()},className:"px-8 py-3 rounded-xl flex items-center gap-3 transition-all "+(k===e.id?`bg-gradient-to-br ${"blue"===e.color?"from-indigo-600 to-blue-600":"from-purple-600 to-pink-600"} shadow-lg`:"bg-gray-100 hover:bg-gray-200"),children:[(0,m.jsx)("span",{className:"text-2xl",children:e.icon}),(0,m.jsx)("span",{className:"font-semibold "+(k===e.id?"text-white":"text-gray-700"),children:e.label})]},e.id)))}),(0,m.jsxs)("div",{className:"flex justify-center items-center gap-2 mt-2",children:[(0,m.jsx)("button",{onClick:()=>$((e=>Math.max(1,e-1))),disabled:1===Z,children:(0,m.jsx)(l.bUI,{})}),(0,m.jsx)("div",{className:"flex gap-1",children:[1,2,3].map((e=>(0,m.jsx)("button",{onClick:()=>$(e),className:`w-8 h-8 rounded-full flex items-center justify-center \n                ${Z===e?"bg-indigo-600 text-white":"bg-gray-200"}\n                ${C[k].includes(e)?"!bg-green-500":""}`,children:e},e)))}),(0,m.jsx)("button",{onClick:()=>$((e=>Math.min(3,e+1))),disabled:3===Z,children:(0,m.jsx)(l.Dli,{})})]})]}),(0,m.jsx)("div",{className:"bg-white rounded-xl shadow-xl mb-8 overflow-hidden",children:(0,m.jsx)("div",{className:"overflow-x-auto",children:(0,m.jsxs)("table",{className:"w-full",children:[(0,m.jsx)("thead",{className:"bg-gradient-to-r from-indigo-600 to-blue-600 text-white",children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{className:"px-6 py-4 text-left rounded-tl-xl",children:"Match"}),(0,m.jsx)("th",{className:"px-6 py-4 text-center",children:"Team"}),(0,m.jsx)("th",{className:"px-6 py-4 text-center",children:"ID"}),(0,m.jsx)("th",{className:"px-6 py-4 text-center",children:"Score"}),(0,m.jsx)("th",{className:"px-6 py-4 text-center",children:"Time"}),(0,m.jsx)("th",{className:"px-6 py-4 text-center rounded-tr-xl",children:"Actions"})]})}),(0,m.jsx)("tbody",{className:"divide-y divide-gray-100",children:null===(p=F[Z-1])||void 0===p||null===(y=p.schedule)||void 0===y||null===(j=y.games)||void 0===j?void 0:j.map((e=>{var t,s;return(0,m.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors "+(M[e.id]?"bg-green-50":""),children:[(0,m.jsxs)("td",{className:"px-6 py-4 font-semibold text-gray-700",children:["#",e.id]}),(0,m.jsx)("td",{className:"px-6 py-4 text-center font-medium",children:e.team1_name}),(0,m.jsx)("td",{className:"px-6 py-4 text-center text-gray-500",children:e.team1}),(0,m.jsx)("td",{className:"px-6 py-4 text-center font-bold text-blue-600",children:(null===(t=v[e.id])||void 0===t?void 0:t.score)||0}),(0,m.jsx)("td",{className:"px-6 py-4 text-center text-gray-600",children:null!==(s=v[e.id])&&void 0!==s&&s.totalTime?(0,m.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,m.jsx)(l.qyc,{className:"text-gray-400"}),(0,m.jsx)("span",{children:me(v[e.id].totalTime)})]}):"-"}),(0,m.jsx)("td",{className:"px-6 py-4 text-center",children:(0,m.jsxs)("button",{onClick:()=>(e=>{b({...e,id:e.id,type:"solo",team:e.team1_name,challengeType:"driver_go"===k?"Driving Challenge":"Coding Challenge",mode:k,round:Z}),H(e)})(e),disabled:M[e.id],className:"px-4 py-2 rounded-lg flex items-center gap-2 transition-transform "+(M[e.id]?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-green-500 hover:bg-green-600 text-white hover:shadow-md"),children:[(0,m.jsx)(l.gmG,{}),(0,m.jsx)("span",{children:"Start Match"})]})})]},e.id)}))})]})})}),(0,m.jsx)("div",{className:"flex justify-center gap-2 mb-4",children:(0,m.jsxs)("button",{onClick:()=>{w((e=>{const t=!e;return t&&xe(),t}))},className:"px-4 py-2 bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg flex items-center text-sm",children:[(0,m.jsx)(l.yyP,{className:"mr-1"}),N?"Hide":"Rankings"]})}),N&&(0,m.jsxs)("div",{className:"bg-white rounded-xl shadow-xl overflow-hidden",children:[(0,m.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 to-blue-600 px-8 py-4 flex items-center gap-3",children:[(0,m.jsx)(l.NMh,{className:"text-white text-2xl"}),(0,m.jsx)("h2",{className:"text-white text-xl font-bold",children:"Live Rankings"})]}),(0,m.jsx)("div",{className:"overflow-x-auto",children:I?(0,m.jsxs)("div",{className:"text-center py-8",children:[(0,m.jsxs)("svg",{className:"animate-spin h-8 w-8 text-blue-500 mx-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,m.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,m.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,m.jsx)("p",{className:"mt-3 text-gray-600",children:"Loading rankings..."})]}):A?(0,m.jsxs)("div",{className:"text-center py-4 text-red-500",children:["\u26a0\ufe0f Error loading rankings: ",A]}):0===T.length?(0,m.jsx)("div",{className:"text-center py-4 text-gray-500",children:"\ud83c\udfdf\ufe0f No rankings available yet"}):(0,m.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,m.jsx)("thead",{className:"bg-indigo-50",children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{className:"px-2 sm:px-4 py-2 text-center text-xs font-medium text-indigo-700 uppercase",children:"Rank"}),(0,m.jsx)("th",{className:"px-2 sm:px-4 py-2 text-center text-xs font-medium text-indigo-700 uppercase",children:"Team"}),(0,m.jsx)("th",{className:"px-2 sm:px-4 py-2 text-center text-xs font-medium text-indigo-700 uppercase",children:"total_score"}),(0,m.jsx)("th",{className:"px-2 sm:px-4 py-2 text-center text-xs font-medium text-indigo-700 uppercase",children:"Medal"})]})}),(0,m.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:T.map(((e,t)=>{const s=t+1;return(0,m.jsxs)("tr",{className:`transition-all duration-150 ${s<=3?"bg-gradient-to-r":"hover:bg-gray-50"} ${1===s?"from-yellow-50/50 to-yellow-50":2===s?"from-gray-50/50 to-gray-50":3===s?"from-amber-50/50 to-amber-50":""}`,children:[(0,m.jsx)("td",{className:"px-2 sm:px-4 py-2  whitespace-nowrap font-medium text-gray-900 text-sm",children:(0,m.jsx)("div",{className:"flex items-center justify-center",children:s<=3?(0,m.jsx)("span",{className:` w-6 h-6 rounded-full flex items-center justify-center \n                                    ${1===s?"bg-yellow-400":2===s?"bg-gray-400":"bg-amber-600"} text-white`,children:s}):(0,m.jsx)("span",{className:"text-gray-600",children:s})})}),(0,m.jsx)("td",{className:"px-2 sm:px-4 py-2 whitespace-nowrap text-sm text-center",children:e.team_name}),(0,m.jsx)("td",{className:"px-2 sm:px-4 py-2 whitespace-nowrap font-bold text-sm text-center",children:e.total_score||0}),(0,m.jsxs)("td",{className:"px-2 sm:px-4 py-2 whitespace-nowrap text-center",children:[1===s&&(0,m.jsx)("span",{className:"text-yellow-500 text-lg sm:text-xl",children:"\ud83e\udd47"}),2===s&&(0,m.jsx)("span",{className:"text-gray-400 text-lg sm:text-xl",children:"\ud83e\udd48"}),3===s&&(0,m.jsx)("span",{className:"text-amber-600 text-lg sm:text-xl",children:"\ud83e\udd49"})]})]},e.team)}))})]})})]})]})})}}}]);
//# sourceMappingURL=995.47434f29.chunk.js.map